(self.webpackChunk_dagster_io_app_oss=self.webpackChunk_dagster_io_app_oss||[]).push([[327],{697:function(e,n,t){"use strict";t.r(n),t.d(n,{RunRoot:function(){return he},default:function(){return ve}});var r,i,o=t(71171),u=t(90239),a=t(31623),s=t(40302),c=t(38527),l=t(99600),d=t(52714),f=t(48439),p=t(15888),h=t(34943),v=t(78193),x=t(50032),m=t(58035),g=t(61365),y=t(14581),j=t(68079),w=t(69059),S=t(29427),I=t(51232),b=t(97412),T=t(45384),A=t(35936),F=new Intl.Collator(navigator.language,{sensitivity:"base"}),k=function(e){var n=e.assetKeys,t=e.evaluationId,r=v.useMemo((function(){return(0,j.Z)(n).sort((function(e,n){return F.compare(e.path.join("/"),n.path.join("/"))}))}),[n]);return(0,A.jsx)(p.J,{placement:"bottom",content:(0,A.jsxs)("div",{style:{width:"340px"},children:[(0,A.jsx)(s.x,{padding:{vertical:8,horizontal:12},border:{side:"bottom",width:1,color:w.w.KeylineGray},style:{fontWeight:600},children:"Auto-materialized"}),(0,A.jsx)(s.x,{flex:{direction:"column",gap:12},padding:{vertical:12},style:{maxHeight:"220px",overflowY:"auto"},children:r.map((function(e){var n=(0,T.p)(e,{view:"auto-materialize-history",evaluation:t});return(0,A.jsxs)(s.x,{padding:{vertical:8,left:12,right:16},flex:{direction:"row",justifyContent:"space-between",alignItems:"center",gap:8},style:{overflow:"hidden"},children:[(0,A.jsxs)(s.x,{flex:{direction:"row",alignItems:"center",gap:8},style:{overflow:"hidden"},children:[(0,A.jsx)(S.JO,{name:"asset"}),(0,A.jsx)(I.g,{text:e.path.join("/")})]}),(0,A.jsx)(b.rU,{to:n,style:{whiteSpace:"nowrap"},children:"View evaluation"})]},n)}))})]}),interactionKind:"hover",children:(0,A.jsx)(f.V,{icon:"auto_materialize_policy",children:"Auto-materialized"})})},O=t(25271),E=t(25646),K=t(79442),R=t(16365),Z=t(97012),_=t(54860),C=t(8512),L=t(33028),N=t(96234),z=t(95),V=t(51718),q=t(60319),U=t(62942),D=t(30417),Q=t(18213),J=t(52479),P=t(89687),M=t(4534),W=t(54202),G=t(48977),H=t(38708),B=t(90604),X=t(19850),$=t(48981),Y=t(63999),ee=t(8153),ne=t(66984),te=t(47578),re=t(74545),ie=t(15251),oe=t(88206),ue=function(e){var n,t=e.run,r=e.runId,i=(0,oe.Bz)(),o=(0,N.Z)(i,2),u=o[0],a=o[1],s=(0,W.q)({queryKey:"selection",defaults:{selection:""}}),c=(0,N.Z)(s,2),l=c[0],d=c[1];n=t?function(e){switch(e){case M.VOA.FAILURE:return"/favicon-run-failed.svg";case M.VOA.SUCCESS:return"/favicon-run-success.svg";case M.VOA.STARTING:case M.VOA.STARTED:case M.VOA.CANCELING:return"/favicon-run-pending.svg";default:return"/favicon.svg"}}(t.status):"/favicon.svg",v.useEffect((function(){var e=document.querySelector('link[rel="icon"][type="image/svg+xml"]');if(e){var t=e.getAttribute("href");return e.setAttribute("href",n),function(){t&&e.setAttribute("href",t)}}}),[n]),(0,O.j)(t?"".concat((0,y.pv)(t.pipelineName)?"":t.pipelineName," ").concat(r.slice(0,8)," [").concat(t.status,"]"):"Run: ".concat(r));var f=function(e,n){var t=n.find((function(n){return"ExecutionStepFailureEvent"===n.__typename&&n.stepKey===e}));t&&(0,U._)({body:(0,A.jsx)(Q.T9,{error:t})})},p=function(e){d(e),a((0,L.Z)((0,L.Z)({},u),{},{logQuery:"*"!==e?[{token:"query",value:e}]:[]}))};return(0,A.jsx)(ne.A.Provider,{value:t,children:(0,A.jsx)(X.C,{runId:r,children:function(e){return(0,A.jsx)(te.jp,{logs:e,children:function(n){return(0,A.jsx)(ae,{run:t,runId:r,logs:e,logsFilter:u,metadata:n,selectionQuery:l,onSetLogsFilter:a,onSetSelectionQuery:p,onShowStateDetails:f})}})}},r)})},ae=function(e){var n=e.run,t=e.runId,r=e.logs,i=e.logsFilter,o=e.metadata,u=e.selectionQuery,a=e.onSetLogsFilter,c=e.onSetSelectionQuery,l=(0,ie.W)(n),d=v.createRef(),f=(0,W.q)({queryKey:"logType",defaults:{logType:"structured"}}),p=(0,N.Z)(f,2),x=p[0],m=p[1],g=function(e){switch(e){case"stdout":return Y.hi.stdout;case"stderr":return Y.hi.stderr;default:return Y.hi.structured}}(x),y=v.useState(null),w=(0,N.Z)(y,2),S=w[0],I=w[1],b=JSON.stringify(Object.keys(o.steps).sort()),T=v.useMemo((function(){return JSON.parse(b)}),[b]),F=(null===n||void 0===n?void 0:n.executionPlan)&&(0,P.J)(null===n||void 0===n?void 0:n.executionPlan,o.steps),k=v.useMemo((function(){return F&&u&&"*"!==u?(0,D.V)(F,u).all.map((function(e){return e.name})):[]}),[F,u]),O=(0,G.a)(),E=(0,re.r)({stepKeys:T,selectionStepKeys:k,metadata:o}),K=E.logCaptureInfo,R=E.computeLogFileKey,Z=E.setComputeLogFileKey,_=F?i.logQuery.filter((function(e){return e.token&&"query"===e.token})).reduce((function(e,n){return[].concat((0,j.Z)(e),(0,j.Z)((0,D.V)(F,n.value).all.map((function(e){return e.name}))))}),[]):[],C=function(e,n){var t,r=k.indexOf(e),i='"'.concat(e,'"');if(n.shiftKey)t=(0,j.Z)(k.map((function(e){return u.includes('"'.concat(e,'"'))?'"'.concat(e,'"'):e}))),-1!==r?t.splice(r,1):t.push(i);else if(1===k.length&&-1!==r)t=[];else{t=[i];var a=(0,re.c)(o.logCaptureSteps,e);a&&Z(a)}c(t.join(", ")||"*")};return(0,A.jsx)(A.Fragment,{children:(0,A.jsx)(V.OS,{ref:d,axis:"vertical",identifier:"run-gantt",firstInitialPercent:35,firstMinSize:56,first:function(e){return n?"QUEUED"===n.status?(0,A.jsx)(J.Fu,{run:n}):n.executionPlan&&F?(0,A.jsx)(z.S,{region:"gantt chart",children:(0,A.jsx)(J.hj,{options:{mode:J.hS.WATERFALL_TIMED},toolbarActions:(0,A.jsxs)(s.x,{flex:{direction:"row",alignItems:"center",gap:12},children:[(0,A.jsx)(V.jo,{axis:"vertical",container:d}),(0,A.jsx)(ee.NX,{run:n,onLaunch:l,graph:F,metadata:e,selection:{query:u,keys:k}})]}),runId:t,graph:F,metadata:e,selection:{query:u,keys:k},onClickStep:C,onSetSelection:c,focusedTime:i.focusedTime})}):(0,A.jsx)(h.t,{icon:"error",title:"Unable to build execution plan"}):(0,A.jsx)(J.ZW,{runId:t})}(o),second:(0,A.jsx)(z.S,{region:"logs",children:(0,A.jsxs)(se,{children:[(0,A.jsx)(Y.KZ,{logType:g,onSetLogType:function(e){return m(Y.hi[e])},filter:i,onSetFilter:a,steps:T,metadata:o,computeLogFileKey:R,onSetComputeLogKey:Z,computeLogUrl:S,counts:r.counts}),g!==Y.hi.structured?O?(0,A.jsx)(H.h,{logKey:R?[t,"compute_logs",R]:[],logCaptureInfo:K,visibleIOType:Y.hi[g],onSetDownloadUrl:I}):(0,A.jsx)(B.K,{runId:t,computeLogFileKey:T.length?R:void 0,ioType:Y.hi[g],setComputeLogUrl:I}):(0,A.jsx)($.S,{logs:r,filter:i,filterStepKeys:_,filterKey:"".concat(JSON.stringify(i)),metadata:o})]})})})})},se=q.ZP.div(r||(r=(0,o.Z)(["\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n"]))),ce=t(68538),le=t(56420),de=t(73354),fe=t(52141),pe=t(43371),he=function(){var e;(0,g.Px)();var n=(0,x.UO)().runId;(0,O.j)(n?"Run ".concat(n.slice(0,8)):"Run");var t=(0,u.a)(me,{variables:{runId:n}}),r=t.data,i=t.loading,o="Run"===(null===r||void 0===r?void 0:r.pipelineRunOrError.__typename)?r.pipelineRunOrError:null,a=null===o||void 0===o?void 0:o.pipelineSnapshotId,h=(0,_.n)(o),j=null!==h&&void 0!==h&&h.match?(0,Z.kQ)(h.match.repository.name,h.match.repositoryLocation.name):null,w=v.useMemo((function(){return!!(o&&h&&(0,R.E8)(h.match,o.pipelineName))}),[o,h]),S=v.useMemo((function(){return(null===o||void 0===o?void 0:o.tags.find((function(e){return e.key===fe.H.AssetEvaluationID})))||null}),[o]);return(0,A.jsxs)("div",{style:{display:"flex",flexDirection:"column",minWidth:0,width:"100%",height:"100%",overflow:"hidden"},children:[(0,A.jsx)(s.x,{flex:{direction:"row",alignItems:"flex-start"},style:{position:"relative",zIndex:1},children:(0,A.jsx)(c.m,{title:(0,A.jsx)(l.X6,{style:{fontFamily:d.b.monospace,fontSize:"20px"},children:n.slice(0,8)}),tags:o?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(de.KG,{status:o.status}),(0,y.pv)(o.pipelineName)?(0,A.jsx)(C.m,{assetKeys:(0,pe.Bo)(o),useTags:!0}):(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)(f.V,{icon:"run",children:["Run of"," ",(0,A.jsx)(E.h,{pipelineName:null===o||void 0===o?void 0:o.pipelineName,pipelineHrefContext:j||"repo-unknown",snapshotId:a,size:"small",isJob:w})]}),(0,A.jsx)(C.m,{assetKeys:o.assets.map((function(e){return e.key})),useTags:!0})]}),(0,A.jsxs)(s.x,{flex:{direction:"row",alignItems:"flex-start",gap:12,wrap:"wrap"},children:[null!==o&&void 0!==o&&o.startTime?(0,A.jsx)(p.J,{interactionKind:"hover",placement:"bottom",content:(0,A.jsx)(s.x,{padding:16,children:(0,A.jsx)(ce.lc,{run:o,loading:i})}),children:(0,A.jsx)(f.V,{icon:"schedule",children:(0,A.jsx)(K.v,{timestamp:o.startTime,timeFormat:{showSeconds:!0,showTimezone:!1}})})}):o.updateTime?(0,A.jsx)(f.V,{icon:"schedule",children:(0,A.jsx)(K.v,{timestamp:o.updateTime,timeFormat:{showSeconds:!0,showTimezone:!1}})}):void 0,null!==o&&void 0!==o&&o.startTime&&null!==o&&void 0!==o&&o.endTime?(0,A.jsx)(p.J,{interactionKind:"hover",placement:"bottom",content:(0,A.jsx)(s.x,{padding:16,children:(0,A.jsx)(ce.lc,{run:o,loading:i})}),children:(0,A.jsx)(f.V,{icon:"timer",children:(0,A.jsx)("span",{style:{fontVariantNumeric:"tabular-nums"},children:null!==o&&void 0!==o&&o.startTime?(0,m.fv)((1e3*(null===o||void 0===o?void 0:o.endTime)||Date.now())-1e3*(null===o||void 0===o?void 0:o.startTime)):"\u2013"})})}):null,S&&null!==(e=o.assetSelection)&&void 0!==e&&e.length?(0,A.jsx)(k,{assetKeys:o.assetSelection,evaluationId:S.value}):null]})]}):null,right:o?(0,A.jsx)(ce.Up,{run:o,isJob:w}):null})}),(0,A.jsx)(xe,{data:r,runId:n})]})},ve=he,xe=function(e){var n=e.data,t=e.runId;return n&&n.pipelineRunOrError?"Run"!==n.pipelineRunOrError.__typename?(0,A.jsx)(s.x,{padding:{vertical:64},children:(0,A.jsx)(h.t,{icon:"error",title:"No run found",description:"The run with this ID does not exist or has been cleaned up."})}):(0,A.jsx)(ue,{run:n.pipelineRunOrError,runId:t}):(0,A.jsx)(ue,{run:void 0,runId:t})},me=(0,a.Ps)(i||(i=(0,o.Z)(["\n  query RunRootQuery($runId: ID!) {\n    pipelineRunOrError(runId: $runId) {\n      ... on Run {\n        id\n        ...RunPageFragment\n      }\n    }\n  }\n\n  ","\n"])),le.tQ)},15251:function(e,n,t){"use strict";t.d(n,{W:function(){return f}});var r=t(32723),i=t(34795),o=t(96234),u=t(15541),a=t(78193),s=t(50032),c=t(89897),l=t(54860),d=t(43371),f=function(e){var n=(0,s.k6)(),t=(0,u.D)(d.kO),f=(0,o.Z)(t,1)[0],p=(0,l.n)(e);return a.useCallback(function(){var t=(0,i.Z)((0,r.Z)().mark((function t(i){var o,u,a;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e&&e.pipelineSnapshotId&&p){t.next=2;break}return t.abrupt("return");case 2:return o=(0,d.kz)({run:e,style:i,repositoryLocationName:p.match.repositoryLocation.name,repositoryName:p.match.repository.name}),t.prev=3,t.next=6,f({variables:o});case 6:a=t.sent,(0,d.lF)(e.pipelineName,null===(u=a.data)||void 0===u?void 0:u.launchPipelineReexecution,n,{preserveQuerystring:!0,behavior:"open"}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),(0,c.t)(t.t0);case 13:case"end":return t.stop()}}),t,null,[[3,10]])})));return function(e){return t.apply(this,arguments)}}(),[n,f,p,e])}},48652:function(e,n,t){var r=t(39865),i={ease:r(.25,.1,.25,1),easeIn:r(.42,0,1,1),easeOut:r(0,0,.58,1),easeInOut:r(.42,0,.58,1),linear:r(0,0,1,1)};function o(){}function u(){var e=new Set,n=new Set,t=0;return{next:r,cancel:r,clearAll:function(){e.clear(),n.clear(),cancelAnimationFrame(t),t=0}};function r(e){n.add(e),t||(t=requestAnimationFrame(i))}function i(){t=0;var r=n;n=e,(e=r).forEach((function(e){e()})),e.clear()}}e.exports=function(e,n,t){var r=Object.create(null),u=Object.create(null),a="function"===typeof(t=t||{}).easing?t.easing:i[t.easing];a||(t.easing&&console.warn("Unknown easing function in amator: "+t.easing),a=i.ease);var s="function"===typeof t.step?t.step:o,c="function"===typeof t.done?t.done:o,l=function(e){if(!e){return"undefined"!==typeof window&&window.requestAnimationFrame?{next:window.requestAnimationFrame.bind(window),cancel:window.cancelAnimationFrame.bind(window)}:{next:function(e){return setTimeout(e,1e3/60)},cancel:function(e){return clearTimeout(e)}}}if("function"!==typeof e.next)throw new Error("Scheduler is supposed to have next(cb) function");if("function"!==typeof e.cancel)throw new Error("Scheduler is supposed to have cancel(handle) function");return e}(t.scheduler),d=Object.keys(n);d.forEach((function(t){r[t]=e[t],u[t]=n[t]-e[t]}));var f,p="number"===typeof t.duration?t.duration:400,h=Math.max(1,.06*p),v=0;return f=l.next((function n(){var t=a(v/h);v+=1,x(t),v<=h?(f=l.next(n),s(e)):(f=0,setTimeout((function(){c(e)}),0))})),{cancel:function(){l.cancel(f),f=0}};function x(n){d.forEach((function(t){e[t]=u[t]*n+r[t]}))}},e.exports.makeAggregateRaf=u,e.exports.sharedScheduler=u()},39865:function(e){var n=.1,t="function"===typeof Float32Array;function r(e,n){return 1-3*n+3*e}function i(e,n){return 3*n-6*e}function o(e){return 3*e}function u(e,n,t){return((r(n,t)*e+i(n,t))*e+o(n))*e}function a(e,n,t){return 3*r(n,t)*e*e+2*i(n,t)*e+o(n)}function s(e){return e}e.exports=function(e,r,i,o){if(!(0<=e&&e<=1&&0<=i&&i<=1))throw new Error("bezier x values must be in [0, 1] range");if(e===r&&i===o)return s;for(var c=t?new Float32Array(11):new Array(11),l=0;l<11;++l)c[l]=u(l*n,e,i);function d(t){for(var r=0,o=1;10!==o&&c[o]<=t;++o)r+=n;--o;var s=r+(t-c[o])/(c[o+1]-c[o])*n,l=a(s,e,i);return l>=.001?function(e,n,t,r){for(var i=0;i<4;++i){var o=a(n,t,r);if(0===o)return n;n-=(u(n,t,r)-e)/o}return n}(t,s,e,i):0===l?s:function(e,n,t,r,i){var o,a,s=0;do{(o=u(a=n+(t-n)/2,r,i)-e)>0?t=a:n=a}while(Math.abs(o)>1e-7&&++s<10);return a}(t,r,r+n,e,i)}return function(e){return 0===e?0:1===e?1:u(d(e),r,o)}}},86357:function(e,n,t){var r=t(10243);e.exports=function(e,n){return!!(null==e?0:e.length)&&r(e,n,0)>-1}},93550:function(e){e.exports=function(e,n,t){for(var r=-1,i=null==e?0:e.length;++r<i;)if(t(n,e[r]))return!0;return!1}},14269:function(e){e.exports=function(e,n,t,r){for(var i=e.length,o=t+(r?1:-1);r?o--:++o<i;)if(n(e[o],o,e))return o;return-1}},10243:function(e,n,t){var r=t(14269),i=t(71427),o=t(84751);e.exports=function(e,n,t){return n===n?o(e,n,t):r(e,i,t)}},71427:function(e){e.exports=function(e){return e!==e}},57491:function(e,n,t){var r=t(67268),i=t(86357),o=t(93550),u=t(59390),a=t(28809),s=t(27525);e.exports=function(e,n,t){var c=-1,l=i,d=e.length,f=!0,p=[],h=p;if(t)f=!1,l=o;else if(d>=200){var v=n?null:a(e);if(v)return s(v);f=!1,l=u,h=new r}else h=n?[]:p;e:for(;++c<d;){var x=e[c],m=n?n(x):x;if(x=t||0!==x?x:0,f&&m===m){for(var g=h.length;g--;)if(h[g]===m)continue e;n&&h.push(m),p.push(x)}else l(h,m,t)||(h!==p&&h.push(m),p.push(x))}return p}},28809:function(e,n,t){var r=t(66938),i=t(14669),o=t(27525),u=r&&1/o(new r([,-0]))[1]==1/0?function(e){return new r(e)}:i;e.exports=u},84751:function(e){e.exports=function(e,n,t){for(var r=t-1,i=e.length;++r<i;)if(e[r]===n)return r;return-1}},14669:function(e){e.exports=function(){}},23662:function(e,n,t){var r=t(57491);e.exports=function(e){return e&&e.length?r(e):[]}}}]);
//# sourceMappingURL=327.0897ea66.chunk.js.map