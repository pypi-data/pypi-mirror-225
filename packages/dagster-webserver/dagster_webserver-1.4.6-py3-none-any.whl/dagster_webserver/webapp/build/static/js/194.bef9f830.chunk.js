"use strict";(self.webpackChunk_dagster_io_app_oss=self.webpackChunk_dagster_io_app_oss||[]).push([[194],{12313:function(n,t,e){e.d(t,{R:function(){return i}});var i=function(n){return"result"!==n.solid.name?"".concat(n.solid.name,":").concat(n.definition.name):n.solid.name}},3194:function(n,t,e){e.r(t),e.d(t,{layoutOp:function(){return O},layoutOpGraph:function(){return w}});var i=e(68079),o=e(96234),r=e(83975),a=e(12313),u=370,d=52,h=22,f=26,p=0,s=35,c=4,l=13,m=f/2,g=70,y=70,v=50,x=100;function b(n){var t={};return n.forEach((function(n){return n.forEach((function(n){return t[(0,a.R)(n)]=n}))})),Object.values(t)}function w(n,t){var e=new r.graphlib.Graph,i=0,a=x,u=x;t.parentOp&&(i=Math.max(t.parentOp.inputs.length,t.parentOp.outputs.length)*f,a=(u=g+y)+i),e.setGraph({rankdir:"TB",marginx:u,marginy:a}),e.setDefaultEdgeLabel((function(){return{}}));var d=[],h={};n.forEach((function(n){h[n.name]=!0})),n.forEach((function(n){var t=O(n,{x:0,y:0});e.setNode(n.name,{width:t.bounds.width,height:t.bounds.height}),n.inputs.forEach((function(t){t.dependsOn.forEach((function(i){h[i.solid.name]&&h[n.name]&&(e.setEdge({v:i.solid.name,w:n.name},{weight:1}),d.push({from:{point:{x:0,y:0},opName:i.solid.name,edgeName:i.definition.name},to:{point:{x:0,y:0},opName:n.name,edgeName:t.definition.name}}))}))}))})),r.layout(e);var p={},s={};e.nodes().forEach((function(n){var t=e.node(n);t&&(s[n]=t)}));var c=0,m=0;Object.entries(s).forEach((function(t){var e=(0,o.Z)(t,2),i=e[0],r=e[1],a=n.find((function(n){return n.name===i}));if(a){var u=r.x-r.width/2,d=r.y-r.height/2;p[i]=O(a,{x:u,y:d}),c=Math.max(c,u+r.width),m=Math.max(m,d+r.height)}})),e.edges().forEach((function(n){var t=d.find((function(t){return t.from.opName===n.v&&t.to.opName===n.w})),i=e.edge(n).points;t&&i.length>0&&(t.from.point=i[0],t.to.point=i[i.length-1])}));var w={edges:d,nodes:p,width:c+u,height:m+a,parent:null};return t.parentOp&&(w.parent=function(n,t,e){var i={invocationBoundingBox:{x:1,y:1,width:n.width-1,height:n.height-1},bounds:{x:y,y:y+e,width:n.width-2*y,height:n.height-2*(y+e)},mappingLeftEdge:y-20,mappingLeftSpacing:10,inputs:{},outputs:{},dependsOn:E(b(t.inputs.map((function(n){return n.dependsOn}))),-v,n.width),dependedBy:E(b(t.outputs.map((function(n){return n.dependedBy}))),n.height+v,n.width)},o=i.bounds.y+i.bounds.height;return t.inputs.forEach((function(n,t){i.inputs[n.definition.name]={layout:{x:i.bounds.x,y:i.bounds.y-t*f-f,width:0,height:f},collapsed:[],label:!0,port:{x:i.bounds.x+l,y:i.bounds.y-t*f-f/2}}})),t.outputs.forEach((function(n,t){i.outputs[n.definition.name]={layout:{x:i.bounds.x,y:o+t*f,width:0,height:f},collapsed:[],label:!0,port:{x:i.bounds.x+l,y:o+t*f+f/2}}})),i}(w,t.parentOp,i)),w}function E(n,t,e){var i=y+l,o=e-2*i,r=Math.max(200,o/n.length),u=i+Math.min(0,(o-n.length*r)/2),d=r<300?20:0,h={};return n.forEach((function(n,e){var i=1-e%2*2;h[(0,a.R)(n)]={x:u+e*r,y:t+d*i}})),h}function O(n,t){var e=t.y,o=function(n,o,r){var a,d=(0,i.Z)(n).sort((function(n,t){return o(n).localeCompare(o(t))})),h=0,p=null,c={},g=Math.min(s,u/(d.length+1));d.forEach((function(n,i){var o=r(n);o!==p?(p=o,a={port:{x:t.x+h+l,y:e+m},collapsed:[],label:!1,layout:{x:t.x+h,y:e,width:s,height:f}},c[n.definition.name]=a,h+=g):(0===a.collapsed.length&&(h+=15),a.collapsed.push(n.definition.name))}));var y=(u-(h-l+s))/2;return Object.values(c).forEach((function(n){n.layout.x+=y,n.port.x+=y})),e+=f,c},r=function(n){var i={};return n.forEach((function(n){i[n.definition.name]={port:{x:t.x+l,y:e+m},label:!0,collapsed:[],layout:{x:t.x,y:e,width:0,height:f}},e+=f})),i},a=n.inputs.length>c?o(n.inputs,(function(n){return n.definition.name}),(function(n){var t;return(null===(t=n.dependsOn[0])||void 0===t?void 0:t.solid.name)||""})):r(n.inputs),g={x:t.x,y:Math.max(t.y,e-p),width:u,height:d+2*p};e+=d,n.definition.assetNodes.length&&n.definition.description&&(g.height+=h,e+=h);var y=n.outputs.length>c?o(n.outputs,(function(n){var t;return(null===(t=n.dependedBy[0])||void 0===t?void 0:t.definition.name)||""}),(function(n){var t;return(null===(t=n.dependedBy[0])||void 0===t?void 0:t.solid.name)||""})):r(n.outputs);return{bounds:{x:t.x-5,y:t.y-5,width:u+10,height:e-t.y+10},op:g,inputs:a,outputs:y}}},81079:function(n,t,e){function i(n){if("undefined"!==typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}e.d(t,{Z:function(){return i}})},68079:function(n,t,e){e.d(t,{Z:function(){return a}});var i=e(926);var o=e(81079),r=e(59147);function a(n){return function(n){if(Array.isArray(n))return(0,i.Z)(n)}(n)||(0,o.Z)(n)||(0,r.Z)(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}}}]);
//# sourceMappingURL=194.bef9f830.chunk.js.map