{"version":3,"file":"static/js/630.32258261.chunk.js","mappings":"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","sources":["../../ui-core/src/assets/AssetGroupSuggest.tsx","../../ui-core/src/assets/AssetsGroupsGlobalGraphRoot.tsx","../../ui-core/src/instance/RepoFilterButton.tsx","../../ui-core/src/workspace/ReloadAllButton.tsx","../../../node_modules/lodash/_baseDifference.js","../../../node_modules/lodash/flatMap.js","../../../node_modules/lodash/keyBy.js","../../../node_modules/lodash/pickBy.js","../../../node_modules/lodash/without.js"],"sourcesContent":["import {Box, Checkbox, Icon, MenuItem, Suggest} from '@dagster-io/ui-components';\nimport isEqual from 'lodash/isEqual';\nimport uniqBy from 'lodash/uniqBy';\nimport * as React from 'react';\n\nimport {AssetGroupSelector} from '../graphql/types';\nimport {ClearButton} from '../ui/ClearButton';\nimport {buildRepoPathForHuman} from '../workspace/buildRepoAddress';\n\ntype Asset = {\n  definition: {\n    groupName: string | null;\n    repository: {name: string; location: {name: string}};\n  } | null;\n};\n\nexport function useAssetGroupSelectorsForAssets(assets: Asset[] | undefined) {\n  return React.useMemo(\n    () =>\n      uniqBy(\n        (assets || []).map(buildAssetGroupSelector).filter((a) => !!a) as AssetGroupSelector[],\n        (a) => JSON.stringify(a),\n      ).sort((a, b) => a.groupName.localeCompare(b.groupName)),\n    [assets],\n  );\n}\n\n// We're using a <Suggest /> component because it's convenient to have typeahead behavior,\n// but we want to support mulit-selection. To achieve this, we show checkboxes on the items\n// and override the label text (\"2 groups\"). Blueprint doesn't need to know what the real\n// selection is, just that one exists.\nconst FAKE_SELECTED_ITEM: AssetGroupSelector = {\n  groupName: '-',\n  repositoryLocationName: '-',\n  repositoryName: '-',\n};\n\nexport const AssetGroupSuggest: React.FC<{\n  assetGroups: AssetGroupSelector[];\n  value: AssetGroupSelector[];\n  onChange: (g: AssetGroupSelector[]) => void;\n}> = ({assetGroups, value, onChange}) => {\n  const repoKey = (g: AssetGroupSelector) => `${g.repositoryName}@${g.repositoryLocationName}`;\n  const repoKey1 = assetGroups[0] ? repoKey(assetGroups[0]) : '';\n  const repoContextNeeded = !assetGroups.every((g) => repoKey1 === repoKey(g));\n\n  return (\n    <Suggest<AssetGroupSelector>\n      selectedItem={value.length ? FAKE_SELECTED_ITEM : null}\n      items={assetGroups}\n      menuWidth={300}\n      inputProps={{\n        style: {width: 200},\n        placeholder: 'Filter asset groups…',\n        rightElement: value.length ? (\n          <ClearButton onClick={() => onChange([])} style={{marginTop: 5, marginRight: 4}}>\n            <Icon name=\"cancel\" />\n          </ClearButton>\n        ) : undefined,\n      }}\n      inputValueRenderer={() =>\n        value.length === 1 ? value[0]!.groupName : value.length > 1 ? `${value.length} groups` : ``\n      }\n      itemPredicate={(query, partition) =>\n        query.length === 0 || partition.groupName.toLowerCase().includes(query.toLowerCase())\n      }\n      itemsEqual={isEqual}\n      itemRenderer={(assetGroup, props) => (\n        <MenuItem\n          active={props.modifiers.active}\n          onClick={props.handleClick}\n          key={JSON.stringify(assetGroup)}\n          text={\n            <Box\n              flex={{direction: 'row', gap: 6, alignItems: 'center'}}\n              margin={{left: 4}}\n              style={{maxWidth: '500px'}}\n            >\n              <Checkbox checked={value.some((g) => isEqual(g, assetGroup))} size=\"small\" readOnly />\n              <Box\n                flex={{direction: 'row', alignItems: 'center', grow: 1, shrink: 1}}\n                style={{overflow: 'hidden'}}\n              >\n                <div style={{overflow: 'hidden'}}>\n                  {assetGroup.groupName}\n                  {repoContextNeeded ? (\n                    <span style={{opacity: 0.5, paddingLeft: 4}}>\n                      {buildRepoPathForHuman(\n                        assetGroup.repositoryName,\n                        assetGroup.repositoryLocationName,\n                      )}\n                    </span>\n                  ) : undefined}\n                </div>\n              </Box>\n            </Box>\n          }\n        />\n      )}\n      noResults={<MenuItem disabled={true} text=\"No asset groups\" />}\n      closeOnSelect={false}\n      resetOnQuery={false}\n      onItemSelect={(item) => {\n        const nextValue = value.filter((g) => !isEqual(item, g));\n        if (nextValue.length === value.length) {\n          nextValue.push(item);\n        }\n        onChange(nextValue);\n      }}\n    />\n  );\n};\n\nexport function buildAssetGroupSelector(a: Asset) {\n  return a.definition && a.definition.groupName\n    ? {\n        groupName: a.definition.groupName,\n        repositoryName: a.definition.repository.name,\n        repositoryLocationName: a.definition.repository.location.name,\n      }\n    : null;\n}\n","import {Page, PageHeader, Heading} from '@dagster-io/ui-components';\nimport isEqual from 'lodash/isEqual';\nimport * as React from 'react';\nimport {useHistory, useParams} from 'react-router-dom';\n\nimport {AssetGraphExplorer} from '../asset-graph/AssetGraphExplorer';\nimport {AssetGraphFetchScope} from '../asset-graph/useAssetGraphData';\nimport {AssetLocation} from '../asset-graph/useFindAssetLocation';\nimport {AssetGroupSelector} from '../graphql/types';\nimport {useDocumentTitle} from '../hooks/useDocumentTitle';\nimport {useQueryPersistedState} from '../hooks/useQueryPersistedState';\nimport {RepoFilterButton} from '../instance/RepoFilterButton';\nimport {\n  ExplorerPath,\n  explorerPathFromString,\n  explorerPathToString,\n} from '../pipelines/PipelinePathUtils';\nimport {ReloadAllButton} from '../workspace/ReloadAllButton';\nimport {WorkspaceContext} from '../workspace/WorkspaceContext';\n\nimport {AssetGroupSuggest, buildAssetGroupSelector} from './AssetGroupSuggest';\nimport {assetDetailsPathForKey} from './assetDetailsPathForKey';\n\ninterface AssetGroupRootParams {\n  0: string;\n}\n\nconst __GLOBAL__ = '__GLOBAL__';\n\nexport const AssetsGroupsGlobalGraphRoot: React.FC = () => {\n  const {0: path} = useParams<AssetGroupRootParams>();\n  const {allRepos, visibleRepos} = React.useContext(WorkspaceContext);\n  const history = useHistory();\n\n  const [filters, setFilters] = useQueryPersistedState<{groups: AssetGroupSelector[]}>({\n    encode: ({groups}) => ({groups: JSON.stringify(groups)}),\n    decode: (qs) => ({groups: qs.groups ? JSON.parse(qs.groups) : []}),\n  });\n\n  useDocumentTitle(`Global Asset Lineage`);\n\n  const onChangeExplorerPath = React.useCallback(\n    (path: ExplorerPath, mode: 'push' | 'replace') => {\n      const str = explorerPathToString({...path, pipelineName: __GLOBAL__}).replace(__GLOBAL__, '');\n      history[mode]({pathname: `/asset-groups${str}`, search: history.location.search});\n    },\n    [history],\n  );\n\n  const onNavigateToSourceAssetNode = React.useCallback(\n    (node: AssetLocation) => {\n      history.push(assetDetailsPathForKey(node.assetKey, {view: 'definition'}));\n    },\n    [history],\n  );\n\n  const fetchOptions = React.useMemo(() => {\n    const options: AssetGraphFetchScope = {\n      hideEdgesToNodesOutsideQuery: false,\n      hideNodesMatching: (node) => {\n        if (\n          !visibleRepos.some(\n            (repo) =>\n              repo.repositoryLocation.name === node.repository.location.name &&\n              repo.repository.name === node.repository.name,\n          )\n        ) {\n          return true;\n        }\n        if (filters.groups?.length) {\n          const nodeGroup = buildAssetGroupSelector({definition: node});\n          if (!filters.groups.some((g) => isEqual(g, nodeGroup))) {\n            return true;\n          }\n        }\n\n        return false;\n      },\n    };\n    return options;\n  }, [filters.groups, visibleRepos]);\n\n  const assetGroups: AssetGroupSelector[] = React.useMemo(() => {\n    return visibleRepos.flatMap((repo) =>\n      repo.repository.assetGroups.map((g) => ({\n        groupName: g.groupName,\n        repositoryLocationName: repo.repositoryLocation.name,\n        repositoryName: repo.repository.name,\n      })),\n    );\n  }, [visibleRepos]);\n\n  return (\n    <Page style={{display: 'flex', flexDirection: 'column', paddingBottom: 0}}>\n      <PageHeader\n        title={<Heading>Global Asset Lineage</Heading>}\n        right={\n          <div style={{marginBottom: -8}}>\n            <ReloadAllButton label=\"Reload definitions\" />\n          </div>\n        }\n      />\n      <AssetGraphExplorer\n        fetchOptions={fetchOptions}\n        fetchOptionFilters={\n          <>\n            {allRepos.length > 1 && <RepoFilterButton />}\n            <AssetGroupSuggest\n              assetGroups={assetGroups}\n              value={filters.groups || []}\n              onChange={(groups) => setFilters({...filters, groups})}\n            />\n          </>\n        }\n        options={{preferAssetRendering: true, explodeComposites: true}}\n        explorerPath={explorerPathFromString(__GLOBAL__ + path || '/')}\n        onChangeExplorerPath={onChangeExplorerPath}\n        onNavigateToSourceAssetNode={onNavigateToSourceAssetNode}\n      />\n    </Page>\n  );\n};\n\n// Imported via React.lazy, which requires a default export.\n// eslint-disable-next-line import/no-default-export\nexport default AssetsGroupsGlobalGraphRoot;\n","import {Box, Button, DialogFooter, DialogHeader, Dialog, Icon} from '@dagster-io/ui-components';\nimport * as React from 'react';\n\nimport {RepoSelector} from '../nav/RepoSelector';\nimport {WorkspaceContext} from '../workspace/WorkspaceContext';\n\nexport const RepoFilterButton: React.FC = () => {\n  const {allRepos, visibleRepos, toggleVisible} = React.useContext(WorkspaceContext);\n  const [open, setOpen] = React.useState(false);\n  return (\n    <>\n      <Dialog\n        canOutsideClickClose\n        canEscapeKeyClose\n        isOpen={open}\n        style={{width: 'auto'}}\n        onClose={() => setOpen(false)}\n      >\n        <DialogHeader icon=\"repo\" label=\"Filter code locations\" />\n        <RepoSelector\n          options={allRepos}\n          onBrowse={() => setOpen(false)}\n          onToggle={toggleVisible}\n          selected={visibleRepos}\n        />\n        <DialogFooter>\n          <Box padding={{top: 8}}>\n            <Button intent=\"none\" onClick={() => setOpen(false)}>\n              Done\n            </Button>\n          </Box>\n        </DialogFooter>\n      </Dialog>\n\n      <Button\n        intent=\"none\"\n        icon={<Icon name=\"folder\" />}\n        rightIcon={<Icon name=\"expand_more\" />}\n        onClick={() => setOpen(true)}\n      >\n        {`${visibleRepos.length} of ${allRepos.length}`}\n      </Button>\n    </>\n  );\n};\n","import {Button, Dialog, DialogBody, DialogFooter, Icon, Tooltip} from '@dagster-io/ui-components';\nimport * as React from 'react';\n\nimport {useUnscopedPermissions} from '../app/Permissions';\nimport {PythonErrorInfo} from '../app/PythonErrorInfo';\nimport {\n  reloadFnForWorkspace,\n  useRepositoryLocationReload,\n} from '../nav/useRepositoryLocationReload';\n\nimport {RepositoryLocationErrorDialog} from './RepositoryLocationErrorDialog';\n\nexport const ReloadAllButton: React.FC<{label?: string}> = ({label = 'Reload all'}) => {\n  const {\n    permissions: {canReloadWorkspace},\n    disabledReasons,\n  } = useUnscopedPermissions();\n  const {reloading, tryReload, error, errorLocationId} = useRepositoryLocationReload({\n    scope: 'workspace',\n    reloadFn: reloadFnForWorkspace,\n  });\n\n  const [isOpen, setIsOpen] = React.useState(!!error);\n  React.useEffect(() => setIsOpen(!!error), [error]);\n\n  if (!canReloadWorkspace) {\n    return (\n      <Tooltip content={disabledReasons.canReloadWorkspace}>\n        <Button icon={<Icon name=\"refresh\" />} disabled intent=\"none\">\n          {label}\n        </Button>\n      </Tooltip>\n    );\n  }\n\n  return (\n    <>\n      <Button onClick={tryReload} icon={<Icon name=\"refresh\" />} loading={reloading} intent=\"none\">\n        {label}\n      </Button>\n      {errorLocationId ? (\n        <RepositoryLocationErrorDialog\n          error={error}\n          location={errorLocationId}\n          reloading={reloading}\n          onTryReload={tryReload}\n          onDismiss={() => setIsOpen(false)}\n          isOpen={isOpen}\n        />\n      ) : (\n        <Dialog\n          icon=\"error\"\n          title=\"Reload error\"\n          canEscapeKeyClose={false}\n          canOutsideClickClose={false}\n          style={{width: '90%'}}\n          isOpen={isOpen}\n        >\n          <DialogBody>{error && <PythonErrorInfo error={error} />}</DialogBody>\n          <DialogFooter>\n            <Button onClick={() => setIsOpen(false)}>Dismiss</Button>\n          </DialogFooter>\n        </Dialog>\n      )}\n    </>\n  );\n};\n","var SetCache = require('./_SetCache'),\n    arrayIncludes = require('./_arrayIncludes'),\n    arrayIncludesWith = require('./_arrayIncludesWith'),\n    arrayMap = require('./_arrayMap'),\n    baseUnary = require('./_baseUnary'),\n    cacheHas = require('./_cacheHas');\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * The base implementation of methods like `_.difference` without support\n * for excluding multiple arrays or iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Array} values The values to exclude.\n * @param {Function} [iteratee] The iteratee invoked per element.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new array of filtered values.\n */\nfunction baseDifference(array, values, iteratee, comparator) {\n  var index = -1,\n      includes = arrayIncludes,\n      isCommon = true,\n      length = array.length,\n      result = [],\n      valuesLength = values.length;\n\n  if (!length) {\n    return result;\n  }\n  if (iteratee) {\n    values = arrayMap(values, baseUnary(iteratee));\n  }\n  if (comparator) {\n    includes = arrayIncludesWith;\n    isCommon = false;\n  }\n  else if (values.length >= LARGE_ARRAY_SIZE) {\n    includes = cacheHas;\n    isCommon = false;\n    values = new SetCache(values);\n  }\n  outer:\n  while (++index < length) {\n    var value = array[index],\n        computed = iteratee == null ? value : iteratee(value);\n\n    value = (comparator || value !== 0) ? value : 0;\n    if (isCommon && computed === computed) {\n      var valuesIndex = valuesLength;\n      while (valuesIndex--) {\n        if (values[valuesIndex] === computed) {\n          continue outer;\n        }\n      }\n      result.push(value);\n    }\n    else if (!includes(values, computed, comparator)) {\n      result.push(value);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseDifference;\n","var baseFlatten = require('./_baseFlatten'),\n    map = require('./map');\n\n/**\n * Creates a flattened array of values by running each element in `collection`\n * thru `iteratee` and flattening the mapped results. The iteratee is invoked\n * with three arguments: (value, index|key, collection).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Array} Returns the new flattened array.\n * @example\n *\n * function duplicate(n) {\n *   return [n, n];\n * }\n *\n * _.flatMap([1, 2], duplicate);\n * // => [1, 1, 2, 2]\n */\nfunction flatMap(collection, iteratee) {\n  return baseFlatten(map(collection, iteratee), 1);\n}\n\nmodule.exports = flatMap;\n","var baseAssignValue = require('./_baseAssignValue'),\n    createAggregator = require('./_createAggregator');\n\n/**\n * Creates an object composed of keys generated from the results of running\n * each element of `collection` thru `iteratee`. The corresponding value of\n * each key is the last element responsible for generating the key. The\n * iteratee is invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The iteratee to transform keys.\n * @returns {Object} Returns the composed aggregate object.\n * @example\n *\n * var array = [\n *   { 'dir': 'left', 'code': 97 },\n *   { 'dir': 'right', 'code': 100 }\n * ];\n *\n * _.keyBy(array, function(o) {\n *   return String.fromCharCode(o.code);\n * });\n * // => { 'a': { 'dir': 'left', 'code': 97 }, 'd': { 'dir': 'right', 'code': 100 } }\n *\n * _.keyBy(array, 'dir');\n * // => { 'left': { 'dir': 'left', 'code': 97 }, 'right': { 'dir': 'right', 'code': 100 } }\n */\nvar keyBy = createAggregator(function(result, value, key) {\n  baseAssignValue(result, key, value);\n});\n\nmodule.exports = keyBy;\n","var arrayMap = require('./_arrayMap'),\n    baseIteratee = require('./_baseIteratee'),\n    basePickBy = require('./_basePickBy'),\n    getAllKeysIn = require('./_getAllKeysIn');\n\n/**\n * Creates an object composed of the `object` properties `predicate` returns\n * truthy for. The predicate is invoked with two arguments: (value, key).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Object\n * @param {Object} object The source object.\n * @param {Function} [predicate=_.identity] The function invoked per property.\n * @returns {Object} Returns the new object.\n * @example\n *\n * var object = { 'a': 1, 'b': '2', 'c': 3 };\n *\n * _.pickBy(object, _.isNumber);\n * // => { 'a': 1, 'c': 3 }\n */\nfunction pickBy(object, predicate) {\n  if (object == null) {\n    return {};\n  }\n  var props = arrayMap(getAllKeysIn(object), function(prop) {\n    return [prop];\n  });\n  predicate = baseIteratee(predicate);\n  return basePickBy(object, props, function(value, path) {\n    return predicate(value, path[0]);\n  });\n}\n\nmodule.exports = pickBy;\n","var baseDifference = require('./_baseDifference'),\n    baseRest = require('./_baseRest'),\n    isArrayLikeObject = require('./isArrayLikeObject');\n\n/**\n * Creates an array excluding all given values using\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * **Note:** Unlike `_.pull`, this method returns a new array.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @param {...*} [values] The values to exclude.\n * @returns {Array} Returns the new array of filtered values.\n * @see _.difference, _.xor\n * @example\n *\n * _.without([2, 1, 2, 3], 1, 2);\n * // => [3]\n */\nvar without = baseRest(function(array, values) {\n  return isArrayLikeObject(array)\n    ? baseDifference(array, values)\n    : [];\n});\n\nmodule.exports = without;\n"],"names":["useAssetGroupSelectorsForAssets","assets","React","uniqBy","map","buildAssetGroupSelector","filter","a","JSON","stringify","sort","b","groupName","localeCompare","FAKE_SELECTED_ITEM","repositoryLocationName","repositoryName","AssetGroupSuggest","_ref","assetGroups","value","onChange","repoKey","g","concat","repoKey1","repoContextNeeded","every","_jsx","Suggest","selectedItem","length","items","menuWidth","inputProps","style","width","placeholder","rightElement","ClearButton","onClick","marginTop","marginRight","children","Icon","name","undefined","inputValueRenderer","itemPredicate","query","partition","toLowerCase","includes","itemsEqual","isEqual","itemRenderer","assetGroup","props","MenuItem","active","modifiers","handleClick","text","_jsxs","Box","flex","direction","gap","alignItems","margin","left","maxWidth","Checkbox","checked","some","size","readOnly","grow","shrink","overflow","opacity","paddingLeft","buildRepoPathForHuman","noResults","disabled","closeOnSelect","resetOnQuery","onItemSelect","item","nextValue","push","definition","repository","location","__GLOBAL__","AssetsGroupsGlobalGraphRoot","path","useParams","_React$useContext","WorkspaceContext","allRepos","visibleRepos","history","useHistory","_useQueryPersistedSta","useQueryPersistedState","encode","groups","decode","qs","parse","_useQueryPersistedSta2","_slicedToArray","filters","setFilters","useDocumentTitle","onChangeExplorerPath","mode","str","explorerPathToString","_objectSpread","pipelineName","replace","pathname","search","onNavigateToSourceAssetNode","node","assetDetailsPathForKey","assetKey","view","fetchOptions","hideEdgesToNodesOutsideQuery","hideNodesMatching","_filters$groups","repo","repositoryLocation","nodeGroup","flatMap","Page","display","flexDirection","paddingBottom","PageHeader","title","Heading","right","marginBottom","ReloadAllButton","label","AssetGraphExplorer","fetchOptionFilters","_Fragment","RepoFilterButton","options","preferAssetRendering","explodeComposites","explorerPath","explorerPathFromString","toggleVisible","_React$useState","_React$useState2","open","setOpen","Dialog","canOutsideClickClose","canEscapeKeyClose","isOpen","onClose","DialogHeader","icon","RepoSelector","onBrowse","onToggle","selected","DialogFooter","padding","top","Button","intent","rightIcon","_ref$label","_useUnscopedPermissio","useUnscopedPermissions","canReloadWorkspace","permissions","disabledReasons","_useRepositoryLocatio","useRepositoryLocationReload","scope","reloadFn","reloadFnForWorkspace","reloading","tryReload","error","errorLocationId","setIsOpen","loading","RepositoryLocationErrorDialog","onTryReload","onDismiss","DialogBody","PythonErrorInfo","Tooltip","content","SetCache","require","arrayIncludes","arrayIncludesWith","arrayMap","baseUnary","cacheHas","module","exports","array","values","iteratee","comparator","index","isCommon","result","valuesLength","outer","computed","valuesIndex","baseFlatten","collection","baseAssignValue","keyBy","createAggregator","key","baseIteratee","basePickBy","getAllKeysIn","object","predicate","prop","baseDifference","baseRest","isArrayLikeObject","without"],"sourceRoot":""}