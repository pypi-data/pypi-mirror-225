(self.webpackChunk_dagster_io_app_oss=self.webpackChunk_dagster_io_app_oss||[]).push([[171],{77336:function(n,e,r){"use strict";r.d(e,{b:function(){return x}});var t,o,i,u,s=r(71171),a=r(78193),l=r(60319),c=r(40302),d=r(69059),f=r(49668),h=r(29427),p=r(35936),x=function(n){var e=n.intent,r=n.title,t=n.description,o=n.onClose,i=a.useMemo((function(){switch(e){case"warning":return{backgroundColor:d.w.Yellow50,borderColor:d.w.Yellow500,icon:"warning",iconColor:d.w.Yellow500,textColor:d.w.Yellow700};case"error":return{backgroundColor:d.w.Red50,borderColor:d.w.Red500,icon:"error",iconColor:d.w.Red500,textColor:d.w.Red700};case"success":return{backgroundColor:d.w.Green50,borderColor:d.w.Green500,icon:"done",iconColor:d.w.Green500,textColor:d.w.Green700};default:return{backgroundColor:d.w.Blue50,borderColor:d.w.Blue500,icon:"info",iconColor:d.w.Blue500,textColor:d.w.Blue700}}}),[e]),u=i.backgroundColor,s=i.borderColor,l=i.icon,x=i.iconColor,C=i.textColor;return(0,p.jsx)(g,{background:u,$borderColor:s,$textColor:C,padding:{horizontal:16,vertical:12},children:(0,p.jsxs)(c.x,{flex:{direction:"row",justifyContent:"space-between"},children:[(0,p.jsxs)(f.Z,{direction:"row",spacing:12,alignItems:"flex-start",children:[n.icon||(0,p.jsx)(h.JO,{name:l,color:x}),(0,p.jsxs)(f.Z,{direction:"column",spacing:8,children:[(0,p.jsx)(b,{children:r}),t?(0,p.jsx)(w,{children:t}):null]})]}),o?(0,p.jsx)(v,{onClick:o,children:(0,p.jsx)(h.JO,{name:"close",color:C})}):null]})})};x.defaultProps={intent:"info"};var v=l.ZP.button(t||(t=(0,s.Z)(["\n  background: none;\n  color: inherit;\n  border: none;\n  padding: 0;\n  font: inherit;\n  cursor: pointer;\n  flex-direction: column;\n  height: fit-content;\n"]))),g=(0,l.ZP)(c.x)(o||(o=(0,s.Z)(["\n  box-shadow: inset 4px 0 ",";\n  color: ",";\n\n  a:link,\n  a:visited,\n  a:hover,\n  a:active {\n    color: ",";\n    text-decoration: underline;\n  }\n"])),(function(n){return n.$borderColor}),(function(n){return n.$textColor}),(function(n){return n.$textColor})),b=l.ZP.div(i||(i=(0,s.Z)(["\n  font-weight: 600;\n"]))),w=l.ZP.div(u||(u=(0,s.Z)(["\n  font-weight: 400;\n"])))},7516:function(n,e,r){"use strict";r.d(e,{Rp:function(){return d},b$:function(){return l},pI:function(){return c}});var t,o=r(71171),i=(r(78193),r(60319)),u=r(85049),s=r(29427),a=r(35936),l=function(n){var e=n.hasPrevCursor,r=n.hasNextCursor,t=n.popCursor,o=n.advanceCursor;return(0,a.jsxs)(d,{children:[(0,a.jsx)(u.zx,{disabled:!e,icon:(0,a.jsx)(s.JO,{name:"arrow_back"}),onClick:t,children:"Previous"}),(0,a.jsx)(u.zx,{disabled:!r,rightIcon:(0,a.jsx)(s.JO,{name:"arrow_forward"}),onClick:o,children:"Next"})]})},c=function(n){var e=n.hasPrevCursor,r=n.hasNextCursor,t=n.popCursor,o=n.advanceCursor;return(0,a.jsxs)(d,{children:[(0,a.jsx)(u.zx,{icon:(0,a.jsx)(s.JO,{name:"arrow_back"}),disabled:!e,onClick:t,children:(0,a.jsx)("span",{className:"hideable-button-text",children:"Newer"})}),(0,a.jsx)(u.zx,{rightIcon:(0,a.jsx)(s.JO,{name:"arrow_forward"}),disabled:!r,onClick:o,children:(0,a.jsx)("span",{className:"hideable-button-text",children:"Older"})})]})},d=i.ZP.div(t||(t=(0,o.Z)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 12px;\n  margin-top: 16px;\n"])))},1351:function(n,e,r){"use strict";r.d(e,{Q1:function(){return k},Qf:function(){return R},zc:function(){return y}});var t,o,i=r(71171),u=r(68079),s=r(96234),a=r(33028),l=r(90239),c=r(31623),d=r(85049),f=r(69059),h=r(8236),p=r.n(h),x=r(78193),v=r(50032),g=r(60319),b=r(25271),w=r(18284),C=r(44355),m=r(9251),j=r(35936),y=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=(0,l.a)(Z,{variables:{queuedFilter:(0,a.Z)((0,a.Z)({},n),{},{statuses:Array.from(C.sy)}),inProgressFilter:(0,a.Z)((0,a.Z)({},n),{},{statuses:Array.from(C.Ys)})}}),r=e.data,t=x.useMemo((function(){var n,e;return{queuedCount:"Runs"===(null===r||void 0===r||null===(n=r.queuedCount)||void 0===n?void 0:n.__typename)?r.queuedCount.count:null,inProgressCount:"Runs"===(null===r||void 0===r||null===(e=r.inProgressCount)||void 0===e?void 0:e.__typename)?r.inProgressCount.count:null}}),[r]),o=t.queuedCount,i=t.inProgressCount,c=(0,m.oD)(),f=(0,s.Z)(c,1)[0],h=R(f);(0,b.j)(function(n){switch(n){case"all":return"Runs | All runs";case"failed":return"Runs | Failed";case"in-progress":return"Runs | In progress";case"queued":return"Runs | Queued";case"scheduled":return"Runs | Scheduled";default:return"Runs"}}(h));var p=function(n){var e=f.filter((function(n){return"status"!==n.token})),r=n.map((function(n){return{token:"status",value:n}}));return(0,m.it)([].concat((0,u.Z)(r),(0,u.Z)(e)))};return{tabs:(0,j.jsxs)(d.zH,{children:[(0,j.jsx)(k,{to:p([]),id:"all",$active:"all"===h,children:"All runs"}),(0,j.jsxs)(k,{to:p(Array.from(C.sy)),id:"queued",$active:"queued"===h,children:["Queued (",null!==o&&void 0!==o?o:"indeterminate",")"]}),(0,j.jsxs)(k,{to:p(Array.from(C.Ys)),id:"in-progress",$active:"in-progress"===h,children:["In progress (",null!==i&&void 0!==i?i:"indeterminate",")"]}),(0,j.jsx)(k,{to:p(Array.from(C.hd)),id:"failed",$active:"failed"===h,children:"Failed"}),(0,j.jsx)(k,{title:"Scheduled",to:"/runs/scheduled",id:"scheduled",$active:"scheduled"===h,children:"Scheduled"})]}),queryResult:e}},k=(0,g.ZP)(w.A)(t||(t=(0,i.Z)(["\n  ","\n"])),(function(n){return n.$active&&"\n    background: ".concat(f.w.Gray200,";\n  ")})),R=function(n){var e=(0,v.TH)().pathname;if("/runs/timeline"===e)return"timeline";if("/runs/scheduled"===e)return"scheduled";if("/overview/backfills"===e)return"backfills";var r=new Set(n.filter((function(n){return"status"===n.token})).map((function(n){return n.value})));return p()(C.sy,r)?"queued":p()(C.Ys,r)?"in-progress":p()(C.hd,r)?"failed":"all"},Z=(0,c.Ps)(o||(o=(0,i.Z)(["\n  query RunTabsCountQuery($queuedFilter: RunsFilter!, $inProgressFilter: RunsFilter!) {\n    queuedCount: pipelineRunsOrError(filter: $queuedFilter) {\n      ... on Runs {\n        count\n      }\n    }\n    inProgressCount: pipelineRunsOrError(filter: $inProgressFilter) {\n      ... on Runs {\n        count\n      }\n    }\n  }\n"])))},80171:function(n,e,r){"use strict";r.r(e),r.d(e,{RUNS_ROOT_QUERY:function(){return G},RunsRoot:function(){return Q},default:function(){return Y}});var t=r(71171),o=r(33028),i=r(68079),u=r(96234),s=r(31623),a=r(90239),l=r(87683),c=r(40302),d=r(19427),f=r(38527),h=r(99600),p=r(69059),x=r(77336),v=r(34943),g=r(58760),b=r(7516),w=r(569),C=r.n(w),m=r(78193),j=r(97412),y=r(72885),k=r(59298),R=r(61365),Z=r(70363),P=r(35936);function q(n){var e=n.node,r=m.useRef(null);return m.useLayoutEffect((function(){var n=r.current;if(e.parentNode!==n){if(null!==e.parentNode&&e.parentNode!==n)throw Error("Cannot render the same node twice");return null===n||void 0===n||n.appendChild(e),function(){null===n||void 0===n||n.removeChild(e)}}}),[e]),(0,P.jsx)("div",{ref:r})}var _,E,$=r(21372),F=r(65534),O=r(63727),S=r(71594),T=r(1351),N=r(91870),A=r(43371),z=r(9251),I=r(21763),Q=function(){(0,R.Px)();var n=(0,z.oD)(),e=(0,u.Z)(n,2),r=e[0],t=e[1],s=(0,z.VH)(r),a=(0,F._)(),w=(0,I.l)({nextCursorForResult:function(n){var e;if("Runs"===n.pipelineRunsOrError.__typename)return null===(e=n.pipelineRunsOrError.results[24])||void 0===e?void 0:e.id},getResultArray:function(n){return n&&"Runs"===n.pipelineRunsOrError.__typename?n.pipelineRunsOrError.results:[]},variables:{filter:s},query:G,pageSize:25}),y=w.queryResult,_=w.paginationProps,E=(0,k.C4)(y,k.dT),$=(0,T.Qf)(r),Q="all"!==$,Y=C()(r,(function(n){return"status"===n.token})),B=(0,u.Z)(Y,2),D=B[0],H=B[1],J=m.useCallback((function(n){t(Q?[].concat((0,i.Z)(D),(0,i.Z)(n)):n)}),[t,Q,D]),L=m.useCallback((function(n){var e=(0,l.HY)(n);H.some((function(n){return(0,l.HY)(n)===e}))||J([].concat((0,i.Z)(H),[n]))}),[H,J]),V=m.useMemo((function(){var n=["tag","snapshotId","id","job","pipeline","backfill"];return Q||n.push("status"),n}),[Q]),M=m.useMemo((function(){return Q?r.filter((function(n){return"status"!==n.token})):r}),[r,Q]),K=(0,T.zc)(s),W=K.tabs,X=K.queryResult,nn=(0,k.C4)(X,k.dT),en=(0,k.V5)(nn,E),rn=(0,z.Vv)({tokens:M,onChange:J,enabledFilters:V}),tn=rn.button,on=rn.activeFiltersJsx,un=function(n){var e=m.useState(null),r=(0,u.Z)(e,2),t=r[0],o=r[1];return m.useLayoutEffect((function(){o((function(n){return null===n?document.createElement("div"):n}))}),[]),[t?(0,Z.createPortal)(n,t):null,t?(0,P.jsx)(q,{node:t}):null]}(tn),sn=(0,u.Z)(un,2),an=sn[0],ln=sn[1];function cn(){return(0,P.jsxs)(c.x,{flex:{direction:"row",alignItems:"center",gap:8},children:[W,ln]})}return(0,P.jsxs)(d.T,{children:[(0,P.jsx)(f.m,{title:(0,P.jsx)(h.X6,{children:"Runs"}),right:(0,P.jsx)(k.xi,{refreshState:en})}),an,"queued"===$&&a?(0,P.jsxs)(c.x,{flex:{direction:"column",gap:8},padding:{horizontal:24,vertical:16},border:{side:"bottom",width:1,color:p.w.KeylineGray},children:[(0,P.jsx)(x.b,{intent:"info",title:(0,P.jsx)(j.rU,{to:"/config#run_coordinator",children:"View queue configuration"})}),(0,P.jsx)(U,{})]}):null,(0,P.jsx)(A.Lw.Provider,{value:{refetch:y.refetch},children:(0,P.jsx)(O.g,{queryResult:y,allowStaleData:!0,renderError:function(n){var e=!(null===n||void 0===n||!n.networkError||!("statusCode"in n.networkError)||400!==n.networkError.statusCode);return(0,P.jsxs)(c.x,{flex:{direction:"column",gap:32},padding:{vertical:8,left:24,right:12},children:[cn(),(0,P.jsx)(v.t,{icon:"warning",title:e?"Invalid run filters":"Unexpected error",description:e?"The specified run filters are not valid. Please check the filters and try again.":"An unexpected error occurred. Check the console for details."})]})},children:function(n){var e=n.pipelineRunsOrError;return"Runs"!==e.__typename?(0,P.jsx)(c.x,{padding:{vertical:64},children:(0,P.jsx)(v.t,{icon:"error",title:"Query Error",description:e.message})}):(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(S.Y,{$top:0,children:(0,P.jsx)(N.AL,{runs:e.results.slice(0,25),onAddTag:L,filter:s,actionBarComponents:cn(),belowActionBarComponents:on.length?(0,P.jsxs)(P.Fragment,{children:[on,(0,P.jsx)(g.Z,{onClick:function(){J([])},children:"Clear all"})]}):null})}),e.results.length>0?(0,P.jsx)("div",{style:{marginTop:"16px"},children:(0,P.jsx)(b.pI,(0,o.Z)({},_))}):null]})}})})]})},Y=Q,G=(0,s.Ps)(_||(_=(0,t.Z)(["\n  query RunsRootQuery($limit: Int, $cursor: String, $filter: RunsFilter!) {\n    pipelineRunsOrError(limit: $limit, cursor: $cursor, filter: $filter) {\n      ... on Runs {\n        results {\n          id\n          ...RunTableRunFragment\n        }\n      }\n      ... on InvalidPipelineRunsFilterError {\n        message\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"])),N.ZZ,y.B),U=function(){var n=(0,a.a)(B).data,e=m.useContext($.N).pageTitle,r=null===n||void 0===n?void 0:n.instance.daemonHealth.daemonStatus;return null===r||void 0===r||!r.required||null!==r&&void 0!==r&&r.healthy?null:(0,P.jsx)(x.b,{intent:"warning",title:"The queued run coordinator is not healthy.",description:(0,P.jsxs)("div",{children:["View ",(0,P.jsx)(j.rU,{to:"/health",children:e})," for details."]})})},B=(0,s.Ps)(E||(E=(0,t.Z)(['\n  query QueueDaemonStatusQuery {\n    instance {\n      id\n      daemonHealth {\n        id\n        daemonStatus(daemonType: "QUEUED_RUN_COORDINATOR") {\n          id\n          daemonType\n          healthy\n          required\n        }\n      }\n    }\n  }\n'])))},21763:function(n,e,r){"use strict";r.d(e,{l:function(){return l}});var t=r(68079),o=r(33028),i=r(96234),u=r(90239),s=r(78193),a=r(54202);function l(n){var e=s.useState((function(){return[]})),r=(0,i.Z)(e,2),l=r[0],c=r[1],d=(0,a.q)({queryKey:"cursor"}),f=(0,i.Z)(d,2),h=f[0],p=f[1],x=(0,o.Z)((0,o.Z)({},n.variables),{},{cursor:h,limit:n.pageSize+1}),v=(0,u.a)(n.query,{skip:n.skip,variables:x,notifyOnNetworkStatusChange:!0}),g=n.getResultArray(v.data),b={hasPrevCursor:!!h,hasNextCursor:g.length===n.pageSize+1,popCursor:function(){var n=(0,t.Z)(l);p(n.pop()),c(n)},advanceCursor:function(){h&&c((function(n){return[].concat((0,t.Z)(n),[h])}));var e=v.data&&n.nextCursorForResult(v.data);e&&p(e)},reset:function(){c([]),p(void 0)}};return{queryResult:v,paginationProps:b}}},63727:function(n,e,r){"use strict";r.d(e,{T:function(){return d},g:function(){return c}});var t=r(96234),o=r(40302),i=r(34943),u=r(83796),s=r(78193),a=r(67286),l=r(35936),c=function(n){var e=n.children,r=n.purpose,u=n.allowStaleData,c=void 0!==u&&u,f=n.renderError,h=n.queryResult,p=h.error,x=h.data,v=h.loading,g=s.useState(!0),b=(0,t.Z)(g,2),w=b[0],C=b[1],m=!x||v&&!c||0===Object.keys(x).length;if(s.useEffect((function(){var n;return m?n=setTimeout((function(){return C(!1)}),500):C(!0),function(){n&&clearTimeout(n)}}),[m]),p){if(f)return(0,l.jsx)(l.Fragment,{children:f(p)});var j=p.networkError;if(!j)return(0,l.jsx)(o.x,{padding:64,flex:{justifyContent:"center"},children:(0,l.jsx)(i.t,{icon:"error",title:"GraphQL Error - see console for details"})});if("statusCode"in j&&a.h.has(j.statusCode)){var y=j.statusCode;return(0,l.jsx)(o.x,{padding:64,flex:{justifyContent:"center"},children:(0,l.jsx)(i.t,{icon:"error",title:"Network error",description:(0,a.F)(y)})})}}return m?w?null:(0,l.jsx)(d,{purpose:r}):(0,l.jsx)(l.Fragment,{children:e(x)})},d=function(n){var e=n.purpose,r="page"===e;return(0,l.jsx)(o.x,{padding:64,flex:{grow:r?1:void 0,justifyContent:"center",alignItems:"center"},style:r?{height:"100%"}:void 0,children:(0,l.jsx)(u.$,{purpose:e})})};c.defaultProps={purpose:"page"}},71594:function(n,e,r){"use strict";r.d(e,{Y:function(){return u}});var t,o=r(71171),i=r(69059),u=r(60319).ZP.div(t||(t=(0,o.Z)(["\n  thead tr {\n    position: sticky;\n    top: ","px;\n    background-color: ",";\n    z-index: 1;\n  }\n\n  /**\n   * Safari won't render a box-shadow on the `tr` and we don't want an inset\n   * box-shadow on `th` elements because it will create a double-border on the\n   * bottom of the `thead` in the non-stuck state.\n   *\n   * We therefore render an absoulutely-positioned keyline on the bottom of the\n   * `th` elements. This will appear as a border in the stuck state, and will\n   * overlap the top box-shadow of the first row in the non-stuck state.\n   */\n  thead tr th {\n    position: relative;\n  }\n\n  thead tr th::after {\n    content: '';\n    display: block;\n    height: 1px;\n    background-color: ",";\n    position: absolute;\n    bottom: -1px;\n    left: 0;\n    right: 0;\n  }\n"],["\n  thead tr {\n    position: sticky;\n    top: ","px;\n    background-color: ",";\n    z-index: 1;\n  }\n\n  /**\n   * Safari won't render a box-shadow on the \\`tr\\` and we don't want an inset\n   * box-shadow on \\`th\\` elements because it will create a double-border on the\n   * bottom of the \\`thead\\` in the non-stuck state.\n   *\n   * We therefore render an absoulutely-positioned keyline on the bottom of the\n   * \\`th\\` elements. This will appear as a border in the stuck state, and will\n   * overlap the top box-shadow of the first row in the non-stuck state.\n   */\n  thead tr th {\n    position: relative;\n  }\n\n  thead tr th::after {\n    content: '';\n    display: block;\n    height: 1px;\n    background-color: ",";\n    position: absolute;\n    bottom: -1px;\n    left: 0;\n    right: 0;\n  }\n"])),(function(n){var e=n.$top;return void 0===e?0:e}),i.w.White,i.w.KeylineGray)},26257:function(n){n.exports=function(n,e,r,t){for(var o=-1,i=null==n?0:n.length;++o<i;){var u=n[o];e(t,u,r(u),n)}return t}},84152:function(n,e,r){var t=r(5038);n.exports=function(n,e,r,o){return t(n,(function(n,t,i){e(o,n,r(n),i)})),o}},93348:function(n,e,r){var t=r(26257),o=r(84152),i=r(39095),u=r(59557);n.exports=function(n,e){return function(r,s){var a=u(r)?t:o,l=e?e():{};return a(r,n,i(s,2),l)}}},569:function(n,e,r){var t=r(93348)((function(n,e,r){n[r?0:1].push(e)}),(function(){return[[],[]]}));n.exports=t}}]);
//# sourceMappingURL=171.76650983.chunk.js.map