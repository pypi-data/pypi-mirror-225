"use strict";(self.webpackChunkjupyterlab_email=self.webpackChunkjupyterlab_email||[]).push([[568],{568:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SendEmailWidget=void 0,t._activate=h,t.default=void 0;var a=n(965),o=n(609),l=n(519),r=n(527),i=n(778),d=n(322),s=n(450),c=n(760);n(549);const u=document.createElement("option");u.selected=!1,u.disabled=!0,u.hidden=!1,u.style.display="none",u.value="";const p={buildLabel(e){const t=document.createElement("label");return t.textContent=e,t},buildTextarea(e){const t=document.createElement("textarea");return t.placeholder=e,t.style.marginBottom="15px",t},buildSelect(e,t,n){const a=document.createElement("select");return a.classList.add(t||""),a.appendChild(u),e.forEach((e=>{const t=document.createElement("option");t.value=e,t.textContent=e,a.appendChild(t),n&&e===n&&(t.selected=!0)})),a.style.marginBottom="15px",a.style.minHeight="25px",a}};class m extends i.Widget{constructor(e=[],t=!1,n="",a=[],o=[],l=[],r=[],i=[],d=[]){const s=document.createElement("div");s.style.display="flex",s.style.flexDirection="column",s.classList.add("jupyterlab_email_form");const c=document.createElement("div");c.style.flex="1",s.appendChild(c),c.appendChild(p.buildLabel("Type:")),c.appendChild(p.buildSelect(["Email","HTML Attachment","PDF Attachment"],"type","Email")),c.appendChild(p.buildLabel("Code or no Code:")),c.appendChild(p.buildSelect(["Code","No code"],"code","No code")),c.appendChild(p.buildLabel("Send email to:")),c.appendChild(p.buildTextarea("list, of, emails, default is to self")),c.appendChild(p.buildLabel("Email Subject:")),c.appendChild(p.buildTextarea("Subject of email"));const u=document.createElement("div");u.style.flex="1";const m=document.createElement("div");m.style.display="flex",m.style.flexDirection="row";const h=document.createElement("label");h.textContent="Advanced",m.appendChild(h);const g=document.createElement("button"),b=document.createElement("span"),f=document.createElement("button"),y=document.createElement("span");g.classList.add("jp-ToolbarButtonComponent"),f.classList.add("jp-ToolbarButtonComponent"),g.appendChild(b),f.appendChild(y),b.classList.add("jupyterlab_email_open"),y.classList.add("jupyterlab_email_close"),m.appendChild(g),m.appendChild(f),s.appendChild(m),s.appendChild(u),u.style.display="none",g.style.display="block",f.style.display="none",g.onclick=()=>{u.style.display="block",g.style.display="none",f.style.display="block"},f.onclick=()=>{u.style.display="none",g.style.display="block",f.style.display="none"},e.length>0&&(u.appendChild(p.buildLabel("Account:")),u.appendChild(p.buildSelect(e,"accounts",n))),u.appendChild(p.buildLabel("Also attach as:")),u.appendChild(p.buildSelect(["None","PDF","HTML","Both"],"attach","None")),a.length>0&&(u.appendChild(p.buildLabel("Template:")),u.appendChild(p.buildSelect(a,"templates"))),i.length>0&&(u.appendChild(p.buildLabel("User Templates (Overrides 'builtin' template choice):")),u.appendChild(p.buildSelect(i,"user_template"))),o.length>0&&(u.appendChild(p.buildLabel("Signature:")),u.appendChild(p.buildSelect(o,"signatures"))),l.length>0&&(u.appendChild(p.buildLabel("Header:")),u.appendChild(p.buildSelect(l,"headers"))),r.length>0&&(u.appendChild(p.buildLabel("Footer:")),u.appendChild(p.buildSelect(r,"footers"))),d.length>0&&(u.appendChild(p.buildLabel("Post Processors:")),u.appendChild(p.buildSelect(d,"postprocessor"))),super({node:s})}getCode(){return this.codeNode.value}getEmail(){return this.emailNode.value}getType(){return this.typeNode.value}getTo(){return this.toNode.value}getSubject(){return this.subjectNode.value}getAlsoAttach(){return this.alsoAttachNode.value}getTemplate(){return this.templateNode?this.templateNode.value:""}getSignature(){return this.signatureNode?this.signatureNode.value:""}getHeader(){return this.headerNode?this.headerNode.value:""}getFooter(){return this.footerNode?this.footerNode.value:""}getUserTemplate(){return this.userTemplateNode?this.userTemplateNode.value:""}getPostprocessor(){return this.userTemplateNode?this.userTemplateNode.value:""}get typeNode(){return this.node.getElementsByTagName("select")[0]}get codeNode(){return this.node.getElementsByTagName("select")[1]}get emailNode(){return this.node.getElementsByTagName("select")[2]}get toNode(){return this.node.getElementsByTagName("textarea")[0]}get subjectNode(){return this.node.getElementsByTagName("textarea")[1]}get alsoAttachNode(){return this.node.getElementsByTagName("select")[3]}get templateNode(){return this.node.querySelector("select.templates")}get signatureNode(){return this.node.querySelector("select.signatures")}get headerNode(){return this.node.querySelector("select.headers")}get footerNode(){return this.node.querySelector("select.footers")}get userTemplateNode(){return this.node.querySelector("select.user_template")}get postprocessorNode(){return this.node.querySelector("select.postprocessor")}}function h(e,t,n,a,r,d){const{commands:s}=e,u=[],p=[],h=[],g=[],b=[],f=[],y=[];let v=!1;(0,c.request)("get",`${l.PageConfig.getBaseUrl()}email/get`).then((a=>{if(a.ok){const C=a.json();C.templates.forEach((e=>{h.push(e)})),C.user_templates.forEach((e=>{g.push(e)})),C.signatures.forEach((e=>{b.push(e)})),C.headers.forEach((e=>{f.push(e)})),C.footers.forEach((e=>{y.push(e)})),C.emails.forEach((a=>{const C=`send-email:${a}`;p.push(a),u.push(C);const x=new m(p,!1,a,h,b,f,y,g);e.commands.addCommand(C,{execute:()=>{(0,o.showDialog)({body:x,buttons:[o.Dialog.cancelButton(),o.Dialog.okButton({label:"Ok"})],title:"Send email:"}).then((n=>{if("Cancel"===n.button.label)return;const a=d.defaultBrowser.model.path||"",r=t.contextForWidget(e.shell.currentWidget),i=x.getType(),s=x.getEmail(),u=x.getCode(),p=x.getTo(),m=x.getSubject(),h=x.getAlsoAttach(),g=x.getTemplate(),b=x.getUserTemplate(),f=x.getSignature(),y=x.getHeader(),v=x.getFooter(),C=x.getPostprocessor();let N="",E={};return r&&(N=r.path,E=r.model.toJSON()),new Promise((e=>{(0,c.request)("post",`${l.PageConfig.getBaseUrl()}email/run`,{},{also_attach:h,code:u,email:s,folder:a,footer:v,header:y,model:E,path:N,postprocessor:C,signature:f,subject:m,template:g,to:p,type:i,user_template:b},{timeout:3e4}).then((t=>{t.ok?(0,o.showDialog)({buttons:[o.Dialog.okButton({label:"Ok"})],title:"Mail sent!"}).then((()=>{e()})):(0,o.showDialog)({body:"Check the Jupyter logs for the exception.",buttons:[o.Dialog.okButton({label:"Ok"})],title:"Something went wrong!"}).then((()=>{e()}))}))}))}))},isEnabled:()=>!!(e.shell.currentWidget&&t.contextForWidget(e.shell.currentWidget)&&t.contextForWidget(e.shell.currentWidget).model),label:C}),n.addItem({command:C,category:"Email"});const N=new i.Menu({commands:s});N.title.label="Send Emails",e.restored.then((()=>{u.forEach((e=>{N.addItem({command:e,args:{}})})),r&&!v&&(v=!0,r.fileMenu.addGroup([{type:"submenu",submenu:N}],11))}))}))}})),console.log("JupyterLab extension jupyterlab_email is activated!")}t.SendEmailWidget=m;var g={activate:h,autoStart:!0,id:"jupyterlab_email",optional:[],requires:[r.IDocumentManager,o.ICommandPalette,a.ILayoutRestorer,s.IMainMenu,d.IFileBrowserFactory]};t.default=g},408:(e,t,n)=>{n.d(t,{Z:()=>i});var a=n(81),o=n.n(a),l=n(645),r=n.n(l)()(o());r.push([e.id,'\ndiv.jupyterlab_email_form {\n    overflow:scroll;\n    padding-bottom: 25px;\n}\n\nspan.jupyterlab_email_open:after {\n    content: "\\25BC";\n    min-height:16px;\n    min-width:16px;\n    background-size: 16px;\n    display:block;\n}   \n\nspan.jupyterlab_email_close:after {\n    content: "\\25B2";\n    min-height:16px;\n    min-width:16px;\n    background-size: 16px;\n    display:block;\n    margin-top:5px;\n}\n\ndiv.jupyterlab_email_form > div {\n    flex: 1;\n    display: flex;\n    flex-direction: column;\n    width: 100%;\n    padding:5px;\n}\n\ndiv.jupyterlab_email_form > button{\n    min-height: 24px;\n    width:25%;   \n}\n\ndiv.jupyterlab_email_form > div > label,\ndiv.jupyterlab_email_form > div > div,\ndiv.jupyterlab_email_form > div > button,\ndiv.jupyterlab_email_form > div > textarea {\n    width: 90%;\n}\n\ndiv.jupyterlab_email_form div.jp-select-wrapper {\n    padding:0px;\n    height:25px;\n    margin:0px;\n}\n\ndiv.jupyterlab_email_form label {\n    padding:0px;\n    margin-top: 10px;\n}\n\ndiv.jupyterlab_email_form textarea {\n    padding:0px;\n    margin:0px;\n}',""]);const i=r},645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",a=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),a&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),a&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,a,o,l){"string"==typeof e&&(e=[[null,e,void 0]]);var r={};if(a)for(var i=0;i<this.length;i++){var d=this[i][0];null!=d&&(r[d]=!0)}for(var s=0;s<e.length;s++){var c=[].concat(e[s]);a&&r[c[0]]||(void 0!==l&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=l),n&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=n):c[2]=n),o&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=o):c[4]="".concat(o)),t.push(c))}},t}},81:e=>{e.exports=function(e){return e[1]}},549:(e,t,n)=>{n.r(t),n.d(t,{default:()=>f});var a=n(379),o=n.n(a),l=n(795),r=n.n(l),i=n(569),d=n.n(i),s=n(565),c=n.n(s),u=n(216),p=n.n(u),m=n(589),h=n.n(m),g=n(408),b={};b.styleTagTransform=h(),b.setAttributes=c(),b.insert=d().bind(null,"head"),b.domAPI=r(),b.insertStyleElement=p(),o()(g.Z,b);const f=g.Z&&g.Z.locals?g.Z.locals:void 0},379:e=>{var t=[];function n(e){for(var n=-1,a=0;a<t.length;a++)if(t[a].identifier===e){n=a;break}return n}function a(e,a){for(var l={},r=[],i=0;i<e.length;i++){var d=e[i],s=a.base?d[0]+a.base:d[0],c=l[s]||0,u="".concat(s," ").concat(c);l[s]=c+1;var p=n(u),m={css:d[1],media:d[2],sourceMap:d[3],supports:d[4],layer:d[5]};if(-1!==p)t[p].references++,t[p].updater(m);else{var h=o(m,a);a.byIndex=i,t.splice(i,0,{identifier:u,updater:h,references:1})}r.push(u)}return r}function o(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,o){var l=a(e=e||[],o=o||{});return function(e){e=e||[];for(var r=0;r<l.length;r++){var i=n(l[r]);t[i].references--}for(var d=a(e,o),s=0;s<l.length;s++){var c=n(l[s]);0===t[c].references&&(t[c].updater(),t.splice(c,1))}l=d}}},569:e=>{var t={};e.exports=function(e,n){var a=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(n)}},216:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},795:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var a="";n.supports&&(a+="@supports (".concat(n.supports,") {")),n.media&&(a+="@media ".concat(n.media," {"));var o=void 0!==n.layer;o&&(a+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),a+=n.css,o&&(a+="}"),n.media&&(a+="}"),n.supports&&(a+="}");var l=n.sourceMap;l&&"undefined"!=typeof btoa&&(a+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(l))))," */")),t.styleTagTransform(a,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}}]);