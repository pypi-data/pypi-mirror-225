[package]
name = "qdx-common"
version = "0.1.0"
edition = "2021"

[lib]
crate-type = ["cdylib", "rlib"]

[dependencies]
anyhow = "1.0"
assertables = "7.0.1"
async-graphql = { version = "5.0.7", optional = true }
base64 = "0.21.0"
euclid = "0.22.7"
itertools = "0.10.5"
lazy_static = "1.4.0"
periodic-table-on-an-enum = "0.3.2"
petgraph = "0.6.2"
qdx-derive = { path = "../qdx-derive", default-features = false }
qdx-types = { path = "../qdx-types", default-features = false }
serde = { version = "1.0", features = ["derive"], optional = true }
serde_json = { version = "1.0.87", optional = true }
serde-wasm-bindgen = { version = "0.4", optional = true }
sqlx = { version = "0.6.3", features = ["chrono", "json", "macros", "postgres", "runtime-tokio-rustls", "uuid"], optional = true }
strum = "0.24"
strum_macros = "0.24"
thiserror = { version = "1.0.38" }
tracing = { version = "0.1.37"}
tracing-subscriber = { version = "0.3.16", features = ["env-filter"] }
uuid = { version = "1.3.0", features = ["v4"] }
wasm-bindgen = { version = "0.2.86", optional = true }
getrandom = { version = "0.2.8", features = ["js"] }
half = { version = "2.3.1", features = ["serde"] }

[features]
default = ["graphql", "serde", "sqlx", "wasm"]
graphql = ["dep:async-graphql", "qdx-types/graphql"]
serde = ["dep:serde", "dep:serde_json", "uuid/serde", "qdx-types/serde"]
sqlx = ["dep:sqlx", "qdx-types/sqlx"]
wasm = ["dep:wasm-bindgen", "dep:serde-wasm-bindgen"]
