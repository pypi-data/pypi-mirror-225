(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9738],{66521:function(e,n,t){"use strict";t.d(n,{Y:function(){return l}});var r=t(27378),i=t(24246),o=(0,r.createRef)(),l=(0,r.createContext)(o);n.Z=function(e){var n=e.children;return(0,i.jsx)(l.Provider,{value:o,children:n})}},76459:function(e,n,t){"use strict";t.d(n,{m:function(){return s}});var r=t(43350),i=t(80040),o=t(90849),l=t(27378),s=function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;(0,r.Z)(this,e),(0,o.Z)(this,"tableInstance",void 0),this.tableInstance=n,this.updateTableInstance=this.updateTableInstance.bind(this)}return(0,i.Z)(e,[{key:"updateTableInstance",value:function(e){this.tableInstance=e}}]),e}(),a=l.createContext(new s);n.Z=a},85249:function(e,n,t){"use strict";var r=t(34896),i=t(27378),o=t(60378),l=t(44845),s=t(24246);n.Z=function(e){var n=e.globalFilter,t=e.setGlobalFilter,a=e.placeholder,c=(0,i.useState)(n),u=c[0],d=c[1],p=(0,o.useAsyncDebounce)((function(e){t(e||void 0)}),200);return(0,s.jsx)(r.xu,{maxWidth:"510px",width:"100%",children:(0,s.jsx)(l.Z,{onChange:function(e){d(e),p(e)},onClear:function(){d(void 0),t(void 0)},search:u||"",placeholder:a})})}},7078:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return Je}});var r=t(27378),i=t(34896),o=t(88038),l=t.n(o),s=t(35100),a=t(64989),c=t(48114),u=t(24246),d=function(e){var n=e.children,t=e.title;return(0,u.jsxs)(i.kC,{"data-testid":t,direction:"column",height:"100vh",children:[(0,u.jsxs)(l(),{children:[(0,u.jsxs)("title",{children:["Fides Admin UI - ",t]}),(0,u.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,u.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,u.jsx)(s.Z,{}),(0,u.jsx)(c.Z,{}),(0,u.jsxs)(i.kC,{as:"main",overflow:"auto",flexGrow:1,paddingTop:10,paddingLeft:10,gap:10,children:[(0,u.jsx)(i.xu,{flex:0,flexShrink:0,children:(0,u.jsx)(a.U,{})}),(0,u.jsx)(i.kC,{direction:"column",flex:1,minWidth:0,children:n})]})]})},p=t(88486),x=t(83125),h=t(65218),f=t.n(h),m=t(6848),g=t(90849),b=t(90089),j=t(21295),v=t(29549),y=t(73452),O=t(89348),w=t(40397),C=t(66090),S=t(51860),k=t(55732),P=t(97865),z=t(34707),E=t.n(z),I=t(9198),D=t(70409),Z=t(34090),M=t(68301),F=t(43139),T=t(78624),_=t(24753),R=t(60041);function W(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function V(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?W(Object(t),!0).forEach((function(n){(0,g.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):W(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var G={name:"",description:""},H=function(e){var n,t=e.system,r="/systems/configure/".concat(t.fides_key),o=function(e){var n=(0,S.dB)(),t=(0,P.Z)(n,1)[0],r=(0,D.pm)(),i=function(){var n=(0,k.Z)(E().mark((function n(i,o){var l,s;return E().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return l=[V(V({},e),{},{name:i.name,description:i.description})],n.next=3,t(l);case 3:s=n.sent,(0,R.D4)(s)?r((0,_.Vo)((0,T.e$)(s.error))):(r((0,_.t5)("Successfully saved system info")),o.resetForm({values:i}));case 5:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}();return{handleUpsertSystem:i,validationSchema:M.Ry().shape({name:M.Z_().required().label("Name"),description:M.Z_().required().label("Description")})}}(t),l=o.handleUpsertSystem,s=o.validationSchema;return(0,u.jsxs)(i.xu,{children:[(0,u.jsxs)(i.kC,{alignItems:"center",children:[(0,u.jsx)(i.xv,{color:"gray.600",size:"md",lineHeight:6,fontWeight:"semibold",marginBottom:2,children:"System details"}),(0,u.jsx)(i.LZ,{}),(0,u.jsxs)(I._p,{color:"complimentary.500",href:r,children:["View more",(0,u.jsx)(y.h0,{ml:2})]})]}),(0,u.jsx)(i.xu,{width:"100%",padding:4,borderTop:"1px solid",borderColor:"gray.200",children:(0,u.jsx)(Z.J9,{enableReinitialize:!0,initialValues:null!==(n=t)&&void 0!==n?n:G,validationSchema:s,onSubmit:l,children:function(e){var n=e.isSubmitting,t=e.dirty,r=e.isValid;return(0,u.jsxs)(Z.l0,{children:[(0,u.jsx)(p.Gt,{id:"SystemInfo",name:"System Info"}),(0,u.jsx)(i.xu,{marginTop:3,children:(0,u.jsx)(F.j0,{label:"System name",name:"name",variant:"stacked"})}),(0,u.jsx)(i.xu,{marginTop:3,children:(0,u.jsx)(F.Ks,{label:"System Description",name:"description",variant:"stacked"})}),(0,u.jsx)(i.kC,{marginTop:6,justifyContent:"flex-end",children:(0,u.jsx)(v.zx,{textAlign:"right",type:"submit",disabled:!t||!r,colorScheme:"primary",isLoading:n,size:"sm",children:"Save"})})]})}})})]})},B=["isLoading"];function L(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function A(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?L(Object(t),!0).forEach((function(n){(0,g.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):L(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var U=function(e){var n,t=e.selectedSystemId,o=e.resetSelectedSystemId,l=(0,r.useMemo)((function(){return Boolean(t)}),[t]),s=(0,w.f)({includeDatasets:!1,includeDisabled:!1}),a=(s.isLoading,(0,b.Z)(s,B)),c=(0,S.rn)(t,{skip:!t}).data;return(0,u.jsx)(i.xu,{position:"absolute",pointerEvents:"none",top:0,left:0,right:0,bottom:0,overflow:"hidden",children:(0,u.jsx)(j.Mi,{transition:{enter:{ease:"easeInOut",duration:.5},exit:{ease:"easeInOut",duration:.5}},direction:"right",in:l,unmountOnExit:!0,style:{zIndex:11,pointerEvents:"none",position:"absolute"},children:(0,u.jsxs)(i.xu,{position:"absolute",right:"0px",height:"100%",width:"100%",maxWidth:"480px",pointerEvents:"auto",borderWidth:0,boxShadow:"0px 20px 25px -5px rgba(0, 0, 0, 0.1), 0px 10px 10px -5px rgba(0, 0, 0, 0.04)",display:t?"unset":"none",backgroundColor:"white",children:[(0,u.jsx)(i.xu,{id:"drawer-header",borderBottomWidth:1,paddingX:6,paddingY:3,children:(0,u.jsxs)(i.kC,{children:[(0,u.jsx)(i.kC,{justifyContent:"space-between",alignItems:"center",height:"40px",children:(0,u.jsx)(i.xv,{fontWeight:"semibold",fontSize:"lg",lineHeight:"7",color:"gray.900",children:null!==(n=null===c||void 0===c?void 0:c.name)&&void 0!==n?n:"System Information"})}),(0,u.jsx)(i.LZ,{}),(0,u.jsx)(i.kC,{alignItems:"center",children:(0,u.jsx)(v.hU,{icon:(0,u.jsx)(y.Tw,{}),"aria-label":"Close error message",size:"sm",style:{height:"24px",width:"24px",minWidth:"14px",backgroundColor:"#00000000"},onClick:o})})]})}),(0,u.jsx)(i.xu,{id:"drawer-body",height:"calc(100% - 46px)",overflowY:"auto",padding:6,style:{scrollbarGutter:"stable"},children:c?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(H,{system:c}),(0,u.jsx)(i.xv,{size:"md",color:"gray.600",lineHeight:6,fontWeight:"semibold",mt:"10px",mb:2,children:"Data uses"}),(0,u.jsx)(i.xu,{borderTop:"1px solid",borderColor:"gray.200",children:(0,u.jsx)(i.xu,{pb:3,children:(0,u.jsx)(C.Z,A({system:c,addButtonProps:{ml:4}},a))})}),(0,u.jsx)(i.xv,{size:"md",color:"gray.600",lineHeight:6,fontWeight:"semibold",mt:"10px",mb:2,paddingBottom:2,children:"Data flow"}),(0,u.jsx)(O.q,{system:c})]}):null})]})})})},X=t(66521),Y=t(60378),N=t(47134),q=t(75846),K=t(63138),Q=t(14221),$=t(5008),J=t(75523),ee=function(e){var n=e.column,t=e.value,o=function(){var e=r.useState(!1),n=(0,P.Z)(e,2),t=n[0],i=n[1],o=r.useState(!1),l=(0,P.Z)(o,2),s=l[0],a=l[1];return{mouseOver:s,isCellExpanded:t,handleToggleExpanded:function(){return i(!t)},handleMouseEnter:function(){a(!0)},handleMouseLeave:function(){a(!1)}}}(),l=o.isCellExpanded,s=o.handleMouseEnter,a=o.handleMouseLeave,c=o.handleToggleExpanded,d=o.mouseOver,p=function(e){var n,t,r,i,o=e.column,l=e.value,s=(0,m.C)(J.L5),a=(0,m.C)(q.C3),c=(0,m.C)(N.FG);if(o.id===Q.Ux)return{label:(l.split(", ").length?l.split(", ").map((function(e){var n,t;return null!==(n=null===(t=s.get(e))||void 0===t?void 0:t.name)&&void 0!==n?n:e})).join(", "):void 0)||(null!==(n=null===(t=s.get(l))||void 0===t?void 0:t.name)&&void 0!==n?n:l),expanded:l};if(o.id===Q.vy)return{label:l,expanded:null!==(r=null===(i=a.get(l))||void 0===i?void 0:i.fides_key)&&void 0!==r?r:l};if(o.id===Q.OL){var u,d,p=l.split(", ").length?l.split(", ").map((function(e){var n,t;return null!==(n=null===(t=c.get(e))||void 0===t?void 0:t.fides_key)&&void 0!==n?n:e})).join(", "):void 0;return{label:l,expanded:p||(null!==(u=null===(d=c.get(l))||void 0===d?void 0:d.fides_key)&&void 0!==u?u:l)}}return{label:l}}({column:n,value:t});return(0,u.jsx)(i.xu,{position:"relative",onMouseEnter:s,onMouseLeave:a,height:"100%",children:(0,u.jsxs)(i.xu,{display:"flex",justifyContent:"space-between",alignItems:"center",height:"100%",children:[(0,u.jsxs)(i.xu,{overflow:"hidden",flex:1,p:2,children:[(0,u.jsx)(i.xv,{fontSize:"xs",lineHeight:4,fontWeight:"medium",color:"gray.600",isTruncated:!l,children:p.label}),l&&p.expanded!==p.label?(0,u.jsx)(i.xu,{fontStyle:"italic",mt:2,children:(0,u.jsx)(i.xv,{fontSize:"xs",lineHeight:4,fontWeight:"medium",color:"gray.600",children:p.expanded})}):null]}),(d||l)&&p.expanded&&""!==p.expanded?(0,u.jsx)("button",{type:"button",style:{position:"relative",right:"10px"},onClick:function(e){e.stopPropagation(),c()},children:l?(0,u.jsx)($.O1,{width:"18px",height:"18px",my:"-4px"}):(0,u.jsx)($.mC,{width:"18px",height:"18px",my:"-4px"})}):null]})})},ne=t(76459),te=t(77751),re=t(62332);function ie(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function oe(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ie(Object(t),!0).forEach((function(n){(0,g.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ie(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var le=function(e){var n,t,r,o=e.option,l=e.columnId,s=e.filterValue,a=e.toggleFilterOption,c=(0,m.C)(J.L5),d=l===Q.Ux&&null!==(n=null===(t=c.get(o))||void 0===t?void 0:t.name)&&void 0!==n?n:o;return(0,u.jsx)(te.XZ,{value:o,width:"193px",height:"20px",mb:"25px",isChecked:null!==(r=s[o])&&void 0!==r&&r,onChange:function(e){var n=e.target;a(o,n.checked)},_focusWithin:{bg:"gray.100"},colorScheme:"complimentary",children:(0,u.jsx)(i.xv,{fontSize:"sm",lineHeight:5,height:"20px",width:"170px",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",children:d})},o)};function se(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function ae(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?se(Object(t),!0).forEach((function(n){(0,g.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):se(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var ce={minWidth:30,width:150,maxWidth:300,Cell:ee,Filter:function(e){var n=e.column,t=function(e){var n,t=(0,r.useContext)(ne.Z).tableInstance,i=r.useMemo((function(){var n=new Set;return e.preFilteredRows.forEach((function(t){n.add(t.values[e.id])})),Array.from(n)}),[e.id,e.preFilteredRows]),o=r.useMemo((function(){var e={};return i.forEach((function(n){e[n]=!1})),e}),[i]);return{filterValue:null!==(n=e.filterValue)&&void 0!==n?n:o,clearFilterOptions:function(){var n={};i.forEach((function(e){n[e]=!1})),e.setFilter(n)},toggleFilterOption:function(n,r){var i,l=oe(oe({},null!==(i=e.filterValue)&&void 0!==i?i:o),{},(0,g.Z)({},n,r));Object.values(l).every((function(e){return!e}))?null===t||void 0===t||t.setAllFilters(null===t||void 0===t?void 0:t.state.filters.filter((function(n){return n.id!==e.id}))):e.setFilter(l)},options:i,header:e.Header}}(n),o=t.filterValue,l=t.toggleFilterOption,s=t.options,a=(0,r.useState)(!1),c=a[0],d=a[1],p=c?s:s.slice(0,15),x=s.length>15;return(0,u.jsx)(re.UQ,{width:"100%",allowToggle:!0,children:(0,u.jsxs)(re.Qd,{border:"0px",children:[(0,u.jsx)(i.X6,{height:"56px",children:(0,u.jsxs)(re.KF,{height:"100%",children:[(0,u.jsx)(i.xu,{flex:"1",alignItems:"center",justifyContent:"center",textAlign:"left",children:n.Header}),(0,u.jsx)(re.XE,{})]})}),(0,u.jsxs)(re.Hk,{children:[(0,u.jsx)(i.MI,{columns:3,children:p.map((function(e){return(0,u.jsx)(le,{columnId:n.id,option:e,filterValue:o,toggleFilterOption:l},e)}))}),!c&&x?(0,u.jsx)(v.zx,{size:"sm",variant:"ghost",onClick:function(){d(!0)},children:"View more"}):null,c&&x?(0,u.jsx)(v.zx,{size:"sm",variant:"ghost",onClick:function(){d(!1)},children:"View less"}):null]})]})},n.id)},filter:"multifield"},ue={multifield:function(e,n,t){var r=n[0];return e.filter((function(e){var n=e.values[r];return t[n]}))}},de=t(21084),pe=t(30794),xe=t(29470),he=t(60245),fe=t(55232),me=t(61561),ge=t(85249),be=t(73679),je=t(60530),ve=t(68972),ye=t(2926),Oe=t(34522),we=function(e){var n=e.isOpen,t=e.onClose,o=(0,r.useRef)(null),l=(0,r.useContext)(ne.Z).tableInstance;if(!l)return null;var s=function(e,n){if(!e||!e.columns||!e.rows)return"";var t=e.columns,r=e.rows;if("csv"===n)return(0,ve.P)([t].concat((0,be.Z)(r)));var i=Oe.P6.aoa_to_sheet([t].concat((0,be.Z)(r))),o=Oe.P6.book_new();return Oe.P6.book_append_sheet(o,i,"Datamap"),o},a=function(e,n){var t=(new Date).toISOString(),r="report_".concat(t,".").concat(n);if("string"===typeof e){if("csv"===n){var i=new Blob([e],{type:"text/csv;charset=utf-8"});(0,ye.saveAs)(i,r)}}else(0,Oe.Fv)(e,r)},c=function(){var e=(0,k.Z)(E().mark((function e(n){var r,i;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t(),l){e.next=3;break}return e.abrupt("return");case 3:r={columns:l.columns.filter((function(e){return e.isVisible})).map((function(e){return e.Header})),rows:l.rows.map((function(e){return e.subRows})).flatMap((function(e){return e})).map((function(e){return e.cells.map((function(e){return e.value}))}))},i=s(r,n),a(i,n);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,u.jsxs)(je.u_,{initialFocusRef:o,isCentered:!0,isOpen:n,onClose:t,size:"lg",children:[(0,u.jsx)(je.ZA,{}),(0,u.jsxs)(je.hz,{minWidth:"605px",children:[(0,u.jsx)(je.xB,{children:(0,u.jsxs)(i.kC,{flexDir:"column",gap:"16px",children:[(0,u.jsx)(i.xv,{children:"Export"}),(0,u.jsx)(i.iz,{color:"gray.200"})]})}),(0,u.jsx)(je.ol,{}),(0,u.jsx)(je.fe,{pb:"8px",pt:"8px",children:(0,u.jsx)(i.kC,{justifyContent:"center",width:"100%",children:(0,u.jsx)(i.xv,{fontSize:"sm",lineHeight:"20px",children:"To export the current view of the Data Map table, please select the appropriate format below. Your export will contain only the visible columns and rows."})})}),(0,u.jsx)(je.mz,{children:(0,u.jsxs)(i.kC,{borderTop:"1px solid",borderTopColor:"gray.200",justifyContent:"space-between",pt:"24px",width:"100%",children:[(0,u.jsx)(v.zx,{colorScheme:"primary",size:"sm",mr:3,flexGrow:1,onClick:function(){return c("xlsx")},children:"Export Excel (.xls)"}),(0,u.jsx)(v.zx,{colorScheme:"primary",size:"sm",flexGrow:1,onClick:function(){return c("csv")},children:"Export CSV (.csv)"})]})})]})]})},Ce=function(e){var n=e.heading,t=e.children;return(0,u.jsxs)(i.xu,{padding:"24px 8px 8px 24px",children:[(0,u.jsx)(i.X6,{size:"md",lineHeight:6,fontWeight:"bold",mb:2,children:n}),t]})},Se=function(e){var n=e.isOpen,t=e.onClose,o=(0,r.useContext)(ne.Z).tableInstance,l=(0,r.useMemo)((function(){return o||{headerGroups:[]}}),[o]).headerGroups,s=function(e,n){return e.filter((function(e){return e.id===n})).map((function(e){return e.render("Filter",{key:e.id})}))},a=function(e,n){return e.some((function(e){return n.indexOf(e.id)>-1}))},c=(0,r.useMemo)((function(){return l.length>0?l[0].headers.map((function(e){return e})):[]}),[l]);return(0,u.jsxs)(je.u_,{isOpen:n,onClose:t,isCentered:!0,size:"2xl",children:[(0,u.jsx)(je.ZA,{}),(0,u.jsxs)(je.hz,{children:[(0,u.jsx)(je.xB,{children:"Filters"}),(0,u.jsx)(je.ol,{}),(0,u.jsx)(i.iz,{}),(0,u.jsxs)(je.fe,{maxH:"85vh",padding:"0px",overflowX:"auto",children:[a(c,[Q.vy,Q.Ux,Q.OL])?(0,u.jsxs)(Ce,{heading:"Privacy attributes",children:[s(c,Q.vy),s(c,Q.Ux),s(c,Q.OL)]}):null,a(c,[Q.eK])?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(i.iz,{}),(0,u.jsx)(Ce,{heading:"Responsibility",children:s(c,Q.eK)})]}):null]}),(0,u.jsx)(je.mz,{children:(0,u.jsxs)(i.xu,{display:"flex",justifyContent:"space-between",width:"100%",children:[(0,u.jsx)(v.zx,{variant:"outline",size:"sm",mr:3,onClick:function(){null===o||void 0===o||o.setAllFilters([])},flexGrow:1,children:"Reset Filters"}),(0,u.jsx)(v.zx,{colorScheme:"primary",size:"sm",onClick:t,flexGrow:1,children:"Done"})]})})]})]})},ke=t(92975),Pe=t(62709),ze=t(20294),Ee=t(65201),Ie=t(36737),De=t(22348);function Ze(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}var Me=function(e){var n=e.id,t=e.index,o=e.isVisible,l=e.moveColumn,s=e.setColumnVisible,a=e.text,c=function(e){var n=e.id,t=e.index,i=e.moveColumn,o=e.setColumnVisible,l=(0,r.useRef)(null),s=(0,Ie.L)({accept:Q._Q.DraggableColumnListItem,collect:function(e){return{handlerId:e.getHandlerId()}},hover:function(e,n){var r;if(l.current){var o=e.index,s=t;if(o!==s){var a=null===(r=l.current)||void 0===r?void 0:r.getBoundingClientRect(),c=(a.bottom-a.top)/2,u=n.getClientOffset().y-a.top;o<s&&u<c||o>s&&u>c||(i(o,s),Object.assign(e,{index:s}))}}}}),a=(0,P.Z)(s,2),c=a[0].handlerId,u=a[1],d=(0,De.c)({type:Q._Q.DraggableColumnListItem,item:function(){return{id:n,index:t}},collect:function(e){return{isDragging:!!e.isDragging()}}}),p=(0,P.Z)(d,3),x=p[0].isDragging,h=p[1],f=p[2];return h(u(l)),{isDragging:x,ref:l,handlerId:c,preview:f,handleColumnVisibleToggle:function(e){o(t,e.target.checked)}}}({index:t,id:n,moveColumn:l,setColumnVisible:s}),d=c.ref,p=c.isDragging,x=c.handlerId,h=c.preview,f=c.handleColumnVisibleToggle;return(0,u.jsxs)(i.HC,{alignItems:"center",display:"flex",minWidth:0,ref:h,"data-handler-id":x,opacity:p?.2:1,children:[(0,u.jsx)(i.xu,{ref:d,cursor:p?"grabbing":"grab",children:(0,u.jsx)(i.DE,{as:$.zG,color:"gray.300",flexShrink:0,height:"20px",width:"20px",_hover:{color:"gray.700"}})}),(0,u.jsxs)(ke.NI,{alignItems:"center",display:"flex",minWidth:0,title:a,children:[(0,u.jsx)(ke.lX,{color:"gray.700",fontSize:"normal",fontWeight:400,htmlFor:"".concat(n),mb:"0",minWidth:0,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",flexGrow:1,children:a}),(0,u.jsx)(Pe.r,{colorScheme:"complimentary",id:"".concat(n),mr:2,isChecked:o,onChange:f})]})]})},Fe=function(e){var n=e.columns,t=(0,r.useState)(null!==n&&void 0!==n?n:[]),i=t[0],o=t[1];return(0,r.useEffect)((function(){o((null===n||void 0===n?void 0:n.map((function(e){return function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Ze(Object(t),!0).forEach((function(n){(0,g.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ze(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({},e)})))||[])}),[n]),{columns:i,moveColumn:(0,r.useCallback)((function(e,n){o((function(t){return(0,Ee.ZP)(t,(function(t){var r=t[e];t.splice(e,1),t.splice(n,0,r)}))}))}),[]),setColumnVisible:(0,r.useCallback)((function(e,n){o((function(t){return(0,Ee.ZP)(t,(function(t){t[e]&&(t[e].isVisible=n)}))}))}),[])}},Te=function(e){var n=e.isOpen,t=e.onClose,o=(0,he.I0)(),l=(0,m.C)(me.eo),s=Fe({columns:l}),a=(0,r.useCallback)((function(){o((0,me.Bx)(s.columns)),t()}),[t,o,s.columns]);return(0,u.jsxs)(je.u_,{isOpen:n,onClose:t,isCentered:!0,size:"2xl",children:[(0,u.jsx)(je.ZA,{}),(0,u.jsxs)(je.hz,{children:[(0,u.jsx)(je.xB,{pb:0,children:"Data Map Settings"}),(0,u.jsx)(je.ol,{}),(0,u.jsxs)(je.fe,{children:[(0,u.jsx)(i.xv,{fontSize:"sm",color:"gray.500",mb:2,children:"You can toggle columns on and off to hide or show them in the table. Additionally, you can drag columns up or down to change the order"}),(0,u.jsxs)(ze.mQ,{colorScheme:"complimentary",children:[(0,u.jsx)(ze.td,{children:(0,u.jsx)(ze.OK,{color:"complimentary.500",children:"Columns"})}),(0,u.jsx)(ze.nP,{children:(0,u.jsx)(ze.x4,{p:0,pt:4,maxHeight:"270px",overflowY:"scroll",children:(0,u.jsx)(i.aV,{spacing:4,children:s.columns.filter((function(e){return e.value!==Q.Br})).map((function(e,n){return(0,u.jsx)(Me,{id:e.id,index:n+1,isVisible:e.isVisible,moveColumn:s.moveColumn,setColumnVisible:s.setColumnVisible,text:e.text},e.id)}))})})})]})]}),(0,u.jsx)(je.mz,{children:(0,u.jsxs)(i.xu,{display:"flex",justifyContent:"space-between",width:"100%",children:[(0,u.jsx)(v.zx,{variant:"outline",size:"sm",mr:3,onClick:t,flexGrow:1,children:"Cancel"}),(0,u.jsx)(v.zx,{colorScheme:"primary",size:"sm",onClick:a,flexGrow:1,children:"Save"})]})})]})]})},_e=function(){var e=(0,he.I0)(),n=function(){var e=(0,m.C)(me.hd),n=(0,de.qY)(),t=n.isOpen,r=n.onOpen,i=n.onClose,o=(0,de.qY)(),l=o.isOpen,s=o.onOpen,a=o.onClose,c=(0,de.qY)();return{isExportModalOpen:t,isMapOpen:e,isSettingsModalOpen:l,isFilterModalOpen:c.isOpen,onSettingsModalOpen:s,onSettingsModalClose:a,onFilterModalOpen:c.onOpen,onFilterModalClose:c.onClose,onExportClick:function(){r()},onExportModalClose:i,onExportModalOpen:r}}(),t=n.isExportModalOpen,o=n.isFilterModalOpen,l=n.isSettingsModalOpen,s=n.onSettingsModalOpen,a=n.onSettingsModalClose,c=n.onFilterModalOpen,d=n.onFilterModalClose,p=n.onExportClick,x=n.onExportModalClose,h=n.isMapOpen,f=(0,r.useContext)(ne.Z).tableInstance;if(!f)return null;var g=null===f||void 0===f?void 0:f.state.filters.map((function(e){return Object.values(e.value)})).flatMap((function(e){return e})).filter((function(e){return!0===e})).length;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(i.kC,{justifyContent:"flex-end",flexDirection:"row",alignItems:"center",flexWrap:"wrap",rowGap:4,columnGap:4,children:[(0,u.jsx)(i.kC,{flexGrow:1,children:(0,u.jsx)(ge.Z,{globalFilter:f.state.globalFilter,setGlobalFilter:f.setGlobalFilter})}),(0,u.jsxs)(i.kC,{children:[(0,u.jsxs)(v.zx,{"aria-label":"Open Filter Settings",variant:"solid",backgroundColor:"#824EF2",color:"white",size:"sm",marginRight:4,onClick:c,_hover:{opacity:.8},_active:{opacity:.8},rightIcon:(0,u.jsx)($.r1,{}),children:["Filter",g>0?(0,u.jsx)(pe.Vp,{ml:2,backgroundColor:"complimentary.800",borderRadius:"full",color:"white",children:g}):null]}),(0,u.jsxs)(v.hE,{isAttached:!0,size:"sm",marginRight:4,children:[(0,u.jsx)(v.zx,{colorScheme:h?"primary":void 0,onClick:function(){e((0,me.kE)("map"))},"data-testid":"map-btn",children:"Map"}),(0,u.jsx)(v.zx,{colorScheme:h?void 0:"primary",onClick:function(){e((0,me.kE)("table"))},"data-testid":"table-btn",children:"Table"})]}),(0,u.jsx)(v.hU,{"aria-label":"Open Column Settings",variant:"ghost",size:"sm",marginRight:1,onClick:s,icon:(0,u.jsx)(fe.A5,{})}),(0,u.jsx)(xe.v2,{children:(0,u.jsx)(xe.j2,{as:v.hU,"aria-label":"Export data",icon:(0,u.jsx)(fe.nM,{}),onClick:p,size:"sm",variant:"ghost"})})]})]}),(0,u.jsx)(Se,{isOpen:o,onClose:d}),(0,u.jsx)(we,{isOpen:t,onClose:x}),(0,u.jsx)(Te,{isOpen:l,onClose:a})]})},Re=t(40240),We=["key"],Ve=["key"];function Ge(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function He(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Ge(Object(t),!0).forEach((function(n){(0,g.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ge(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Be=function(){return(0,u.jsx)(Re.Th,{padding:0,margin:0,width:4,borderBottomColor:"gray.200",boxSizing:"border-box"})},Le=function(e){var n=e.headerGroups;return(0,u.jsx)(Re.hr,{position:"sticky",top:"0px",height:"36px",zIndex:10,backgroundColor:Q.pE,children:n.map((function(e){var n=e.getHeaderGroupProps(),t=n.key,r=(0,b.Z)(n,We);return(0,u.jsxs)(Re.Tr,He(He({},r),{},{height:"inherit",children:[(0,u.jsx)(Be,{}),e.headers.map((function(e,n){var t=e.getHeaderProps(),r=t.key,o=(0,b.Z)(t,Ve);return(0,u.jsxs)(Re.Th,He(He({},o),{},{title:"".concat(e.Header),textTransform:"none",px:2,display:"flex",alignItems:"center",borderLeftWidth:0===n?"1px":"",borderRightWidth:"1px",borderColor:"gray.200",children:[(0,u.jsx)(i.xv,{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",mr:1,children:e.render("Header")}),e.canResize&&(0,u.jsx)(i.xu,He(He({},e.getResizerProps()),{},{position:"absolute",top:0,right:0,width:2,height:"100%",css:{touchAction:":none"}}))]}),r)})),(0,u.jsx)(Be,{})]}),t)}))})},Ae=["key"],Ue=["key"];function Xe(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Ye(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Xe(Object(t),!0).forEach((function(n){(0,g.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Xe(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Ne=function(e){var n=e.setSelectedSystemId,t=(0,r.useContext)(ne.Z).tableInstance;if(!t)return null;var o=t.getTableProps,l=t.getTableBodyProps,s=t.headerGroups,a=t.prepareRow,c=t.rows;return(0,u.jsx)(i.xu,{boxSize:"100%",overflow:"auto",children:(0,u.jsxs)(Re.iA,Ye(Ye({},o()),{},{size:"sm","data-testid":"datamap-table",children:[(0,u.jsx)(Le,{headerGroups:s}),(0,u.jsx)(Re.p3,Ye(Ye({backgroundColor:Q.pE},l()),{},{children:c.map((function(e){return a(e),[(0,r.createElement)(Re.Tr,Ye(Ye({},e.getRowProps()),{},{borderTopLeftRadius:"6px",borderTopRightRadius:"6px",height:"70px",backgroundColor:"gray.50",borderWidth:"1px",borderBottom:"none",mt:4,ml:4,mr:4,key:e.groupByVal}),(0,u.jsxs)(Re.Td,Ye(Ye({colSpan:e.cells.length},e.cells[0].getCellProps()),{},{width:"auto",paddingX:2,children:[(0,u.jsx)(i.xv,{fontSize:"xs",lineHeight:4,fontWeight:"500",color:"gray.600",textTransform:"uppercase",pb:2,pt:1,children:"System Name"}),(0,u.jsx)(i.xv,{fontSize:"sm",lineHeight:5,fontWeight:"bold",color:"gray.600",children:e.groupByVal})]}))),e.subRows.map((function(t,r){a(t);var i=t.getRowProps(),o=i.key,l=(0,b.Z)(i,Ae);return(0,u.jsx)(Re.Tr,Ye(Ye({minHeight:9,borderWidth:"1px",borderColor:"gray.200",borderTop:"none",borderBottomLeftRadius:r===e.subRows.length-1?"6px":"",borderBottomRightRadius:r===e.subRows.length-1?"6px":""},l),{},{_hover:{bg:"gray.50"},cursor:"pointer",backgroundColor:"white",onClick:function(){t.values[Q.sD]&&n(t.values[Q.sD])},ml:4,mr:4,_last:{mb:4},children:t.cells.map((function(e,n){var r=e.getCellProps(),i=r.key,o=(0,b.Z)(r,Ue);return(0,u.jsx)(Re.Td,Ye(Ye({},o),{},{borderRightWidth:n===t.cells.length-1?"":"1px",borderBottom:"none",borderColor:"gray.200",padding:0,children:e.render("Cell")}),i)}))}),o)}))]}))}))]}))})},qe=t(60709),Ke=function(){return(0,u.jsx)(i.M5,{flex:1,"data-testid":"get-started-modal",backgroundColor:"gray.100",children:(0,u.jsx)(i.xu,{backgroundColor:"white",p:10,borderRadius:"6px",boxShadow:"0px 1px 3px rgba(0, 0, 0, 0.1), 0px 1px 2px rgba(0, 0, 0, 0.06)",maxWidth:{base:"80%",lg:"60%",xl:"50%"},maxHeight:"90%",textAlign:"center",children:(0,u.jsxs)(i.Kq,{spacing:4,children:[(0,u.jsx)(i.xv,{color:"gray.700",fontWeight:"600",children:"Privacy engineering can seem like an endlessly complex confluence of legal and data engineering terminology\u2014fear not\u2014Fides is here to simplify this."}),(0,u.jsx)(i.xv,{children:"Start by scanning your infrastructure. The scanner will connect to your infrastructure to automatically scan and create a list of all systems available and then classify each system containing PII."}),(0,u.jsx)(i.xv,{children:"Let's get started!"}),(0,u.jsx)(i.xu,{children:(0,u.jsx)(v.zx,{as:"a",href:qe.xo,width:"fit-content",colorScheme:"primary","data-testid":"add-systems-btn",children:"Add Systems"})})]})})})},Qe=f()((function(){return Promise.all([t.e(4804),t.e(7670),t.e(6412)]).then(t.bind(t,53027))}),{ssr:!1,loadableGenerated:{webpack:function(){return[53027]}}}),$e=function(){var e=function(){var e=(0,m.C)(me.hd),n=(0,m.C)(me.Xt),t=(0,r.useContext)(X.Y),i=(0,p.oI)().attemptAction,o=(0,r.useState)(),l=o[0],s=o[1],a=(0,r.useCallback)((function(e){i().then((function(n){n&&s(e)}))}),[i,s]),c=(0,r.useCallback)((function(){i().then((function(e){var n;e&&l&&(t.current&&(null===(n=t.current)||void 0===n||n.$id(l).unselect()),s(void 0))}))}),[i,t,l]);return{isMapOpen:e,isGettingStarted:n,selectedSystemId:l,setSelectedSystemId:a,resetSelectedSystemId:c}}(),n=e.isMapOpen,t=e.isGettingStarted,o=e.setSelectedSystemId,l=e.selectedSystemId,s=e.resetSelectedSystemId,a=function(){var e=(0,m.T)(),n=(0,r.useContext)(ne.Z).updateTableInstance,t=(0,m.C)(K.eo),i=(0,K.Ex)({organizationName:"default_organization"}),o=i.data,l=i.isLoading;(0,J.MO)(),(0,q.fd)(),(0,N.te)();var s=(0,r.useRef)(!1);(0,r.useEffect)((function(){if(o){var n=o.columns,t=o.rows;e((0,K.dd)(n)),s.current||(s.current=!0,0===t.length?e((0,K.ym)(!0)):e((0,K.ym)(!1)))}}),[o,e]);var a=(0,r.useMemo)((function(){return o?o.rows:[]}),[o]),c=(0,r.useMemo)((function(){return(t||[]).map((function(e){var n=e.text,t=e.value,r=e.isVisible;return{id:t,accessor:function(e){return e[t]},Header:n,isVisible:r,aggregate:function(e,n){var t=new Set(n);return e.forEach((function(e){t.has(e)||t.add(e)})),Array.from(t.values()).join(", ")}}}))}),[t]),u=(0,Y.useTable)({columns:c,data:a,defaultColumn:ce,filterTypes:ue,initialState:{groupBy:[Q.Br,Q.vy]}},Y.useFilters,Y.useGlobalFilter,Y.useFlexLayout,Y.useResizeColumns,Y.useGroupBy,Y.useExpanded);return(0,r.useEffect)((function(){return n(u)}),[u,n]),(0,r.useEffect)((function(){u.setHiddenColumns((null===t||void 0===t?void 0:t.filter((function(e){return!e.isVisible})).map((function(e){return e.value})))||[])}),[t,u]),ae(ae({},u),{},{isLoading:l})}();return a.isLoading?(0,u.jsx)(i.M5,{width:"100%",flex:"1",children:(0,u.jsx)(x.$,{})}):t?(0,u.jsx)(Ke,{}):(0,u.jsxs)(i.kC,{direction:"column",height:"100%",children:[(0,u.jsx)(i.xu,{marginBottom:3,marginRight:10,children:(0,u.jsx)(_e,{})}),(0,u.jsxs)(i.kC,{position:"relative",flex:1,direction:"row",overflow:"auto",borderWidth:"1px",borderStyle:"solid",borderColor:"gray.200",children:[n?(0,u.jsx)(i.xu,{flex:1,minWidth:"50%",maxWidth:"100%",children:(0,u.jsx)(Qe,{setSelectedSystemId:o})}):null,n?null:(0,u.jsx)(i.xu,{flex:1,minWidth:"50%",maxWidth:"100%",children:(0,u.jsx)(Ne,{setSelectedSystemId:o})}),(0,u.jsx)(U,{selectedSystemId:l,resetSelectedSystemId:s})]})]})},Je=function(){var e=(0,r.useMemo)((function(){return new ne.m}),[]);return(0,u.jsx)(d,{title:"View Map",children:(0,u.jsx)(ne.Z.Provider,{value:e,children:(0,u.jsxs)(X.Z,{children:[(0,u.jsx)($e,{}),(0,u.jsx)(p.eB,{})]})})})}},53910:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/datamap",function(){return t(7078)}])},36786:function(){},43197:function(){}},function(e){e.O(0,[9556,2141,5527,8301,6155,8194,6733,9,5232,3119,2321,9774,2888,179],(function(){return n=53910,e(e.s=n);var n}));var n=e.O();_N_E=n}]);