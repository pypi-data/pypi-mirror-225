(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9738],{66521:function(e,t,n){"use strict";n.d(t,{Y:function(){return s}});var r=n(27378),i=n(24246),o=(0,r.createRef)(),s=(0,r.createContext)(o);t.Z=function(e){var t=e.children;return(0,i.jsx)(s.Provider,{value:o,children:t})}},76459:function(e,t,n){"use strict";n.d(t,{m:function(){return a}});var r=n(43350),i=n(80040),o=n(90849),s=n(27378),a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;(0,r.Z)(this,e),(0,o.Z)(this,"tableInstance",void 0),this.tableInstance=t,this.updateTableInstance=this.updateTableInstance.bind(this)}return(0,i.Z)(e,[{key:"updateTableInstance",value:function(e){this.tableInstance=e}}]),e}(),l=s.createContext(new a);t.Z=l},85249:function(e,t,n){"use strict";var r=n(34896),i=n(27378),o=n(60378),s=n(44845),a=n(24246);t.Z=function(e){var t=e.globalFilter,n=e.setGlobalFilter,l=e.placeholder,c=(0,i.useState)(t),u=c[0],d=c[1],p=(0,o.useAsyncDebounce)((function(e){n(e||void 0)}),200);return(0,a.jsx)(r.xu,{maxWidth:"510px",width:"100%",children:(0,a.jsx)(s.Z,{onChange:function(e){d(e),p(e)},onClear:function(){d(void 0),n(void 0)},search:u||"",placeholder:l})})}},45521:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return wt}});var r=n(27378),i=n(34896),o=n(88038),s=n.n(o),a=n(35100),l=n(64989),c=n(48114),u=n(24246),d=function(e){var t=e.children,n=e.title;return(0,u.jsxs)(i.kC,{"data-testid":n,direction:"column",height:"100vh",children:[(0,u.jsxs)(s(),{children:[(0,u.jsxs)("title",{children:["Fides Admin UI - ",n]}),(0,u.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,u.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,u.jsx)(a.Z,{}),(0,u.jsx)(c.Z,{}),(0,u.jsxs)(i.kC,{as:"main",overflow:"auto",flexGrow:1,paddingTop:10,paddingLeft:10,gap:10,children:[(0,u.jsx)(i.xu,{flex:0,flexShrink:0,children:(0,u.jsx)(l.U,{})}),(0,u.jsx)(i.kC,{direction:"column",flex:1,minWidth:0,children:t})]})]})},p=n(88486),f=n(83125),h=n(65218),x=n.n(h),m=n(6848),b=n(90849),g=n(90089),v=n(21295),j=n(29549),y=n(73452),O=n(89348),w=n(40397),C=n(73679),k=n(55732),S=n(97865),P=n(34707),D=n.n(P),_=n(70409),E=n(9992),z=n(78624),I=n(24753),Z=n(51860),F=n(33167),V=n(62332),M=n(34090),T=n(21084),R=n(5008),W=n(14275),A=n(68301),G=n(55447),H=n(43139),B=n(20477),L=["customFieldValues"],U=["onSubmit","initialValues","onDelete"];function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(Object(n),!0).forEach((function(t){(0,b.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var K=A.Ry().shape({data_categories:A.IX(A.Z_()).min(1,"Must assign at least one data category").label("Data categories"),data_use:A.Z_().required().label("Data use"),data_subjects:A.IX(A.Z_()).min(1,"Must assign at least one data subject").label("Data subjects")}),Y={data_categories:[],data_subjects:[],data_use:"",dataset_references:[],customFieldValues:{},id:"",cookies:[]},N=function(e){e.customFieldValues;var t,n=(0,g.Z)(e,L);return q(q({},n),{},{name:null!==(t=e.name)&&void 0!==t?t:"",cookies:n.cookies.map((function(e){return{name:e,path:"/"}}))})},Q=function(e){var t=e.allDataUses,n=e.allDataCategories,r=e.allDataSubjects,o=e.allDatasets,s=e.onDelete,a=e.privacyDeclarationId,l=e.includeCookies,c=e.includeCustomFields,d=(0,M.u6)(),p=d.dirty,f=d.isSubmitting,h=d.isValid,x=d.initialValues,m=(0,T.qY)(),b=o?o.map((function(e){var t;return{label:null!==(t=e.name)&&void 0!==t?t:e.fides_key,value:e.fides_key}})):[],g=function(){var e=(0,k.Z)(D().mark((function e(){return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(N(x));case 2:m.onClose();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=""===x.data_use;return(0,u.jsxs)(i.Kq,{spacing:4,children:[(0,u.jsx)(H.AP,{id:"data_use",label:"Data use",name:"data_use",options:t.map((function(e){return{value:e.fides_key,label:e.fides_key}})),tooltip:"What is the system using the data for. For example, is it for third party advertising or perhaps simply providing system operations.",variant:"stacked",singleValueBlock:!0,isDisabled:!!a}),(0,u.jsx)(H.j0,{id:"name",label:"Processing Activity",name:"name",variant:"stacked",tooltip:"The personal data processing activity or activities associated with this data use.",disabled:!!a}),(0,u.jsx)(H.AP,{name:"data_categories",label:"Data categories",options:n.map((function(e){return{value:e.fides_key,label:e.fides_key}})),tooltip:"What type of data is your system processing? This could be various types of user or system data.",isMulti:!0,variant:"stacked"}),(0,u.jsx)(H.AP,{name:"data_subjects",label:"Data subjects",options:r.map((function(e){return{value:e.fides_key,label:e.fides_key}})),tooltip:"Whose data are you processing? This could be customers, employees or any other type of user in your system.",isMulti:!0,variant:"stacked"}),l?(0,u.jsx)(H.VT,{name:"cookies",label:"Cookies",options:[],isMulti:!0,variant:"stacked",isClearable:!1}):null,o?(0,u.jsx)(H.AP,{name:"dataset_references",label:"Dataset references",options:b,tooltip:"Referenced Dataset fides keys used by the system.",isMulti:!0,variant:"stacked"}):null,c?(0,u.jsx)(W.uc,{resourceType:B.P6.PRIVACY_DECLARATION,resourceFidesKey:a}):null,(0,u.jsxs)(j.hE,{size:"sm",display:"flex",justifyContent:"space-between",children:[(0,u.jsx)(j.zx,{variant:"outline",onClick:m.onOpen,disabled:v,"data-testid":"delete-btn",children:"Delete"}),(0,u.jsx)(j.zx,{type:"submit",colorScheme:"primary",disabled:!p||!h,isLoading:f,"data-testid":"save-btn",children:"Save"})]}),(0,u.jsx)(G.Z,{onConfirm:g,title:"Delete data use",message:"Are you sure you want to delete this data use? This action can't be undone.",isOpen:m.isOpen,onClose:m.onClose,isCentered:!0})]})},$=function(e){var t=e.onSubmit,n=e.initialValues,o=e.allDataUses,s=e.privacyDeclarationId,a=(0,W.mZ)({resourceType:B.P6.PRIVACY_DECLARATION,resourceFidesKey:s}),l=a.customFieldValues,c=a.upsertCustomFields,d=(0,r.useMemo)((function(){return function(e,t){var n,r;return e?q(q({},e),{},{customFieldValues:t||{},cookies:null!==(n=null===(r=e.cookies)||void 0===r?void 0:r.map((function(e){return e.name})))&&void 0!==n?n:[]}):Y}(n,l)}),[n,l]),p=(0,r.useState)(!1),f=p[0],h=p[1],x=(0,r.useMemo)((function(){var e=o.filter((function(e){return e.fides_key===d.data_use}))[0];if(e)return d.name?"".concat(e.name," - ").concat(d.name):e.name}),[o,d]),m=function(){var e=(0,k.Z)(D().mark((function e(n,r){var i,o,s,a;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.customFieldValues,o=N(n),e.next=4,t(o,r);case 4:if(!(s=e.sent)){e.next=12;break}if(!((a=s.filter((function(e){return e.data_use===n.data_use&&(!e.name||e.name===n.name)}))).length>0)){e.next=10;break}return e.next=10,c({customFieldValues:i,fides_key:a[0].id});case 10:r.resetForm({values:n}),h(!0);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return{handleSubmit:m,renderHeader:function(e){var t=e.dirty,n=e.boxProps,r=e.hideSaved;return(0,u.jsxs)(i.xu,q(q({display:"flex",alignItems:"center",justifyContent:"space-between"},n),{},{children:[x?(0,u.jsx)(i.X6,{as:"h4",size:"xs",fontWeight:"medium",mr:4,children:x}):null,!r&&f&&!t&&d.data_use?(0,u.jsxs)(i.xv,{fontSize:"sm","data-testid":"saved-indicator",children:[(0,u.jsx)(R.St,{})," Saved"]}):null]}))},initialValues:d}},J=function(e){var t=e.onSubmit,n=e.initialValues,r=e.onDelete,o=(0,g.Z)(e,U),s=$({onSubmit:t,initialValues:n,allDataUses:o.allDataUses,privacyDeclarationId:null===n||void 0===n?void 0:n.id}),a=s.handleSubmit,l=s.renderHeader,c=s.initialValues;return(0,u.jsx)(M.J9,{enableReinitialize:!0,initialValues:c,onSubmit:a,validationSchema:K,children:function(e){var t=e.dirty;return(0,u.jsxs)(M.l0,{children:[(0,u.jsx)(p.Gt,{id:"PrivacyDeclaration",name:"New Privacy Declaration"}),(0,u.jsxs)(i.Kq,{spacing:4,children:[(0,u.jsx)(i.xu,{"data-testid":"header",children:l({dirty:t})}),(0,u.jsx)(Q,q({onDelete:r},o))]})]})}})},ee=["privacyDeclaration","onEdit","onDelete","includeCustomFields","includeCookies"],te=["privacyDeclarations"];function ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(n),!0).forEach((function(t){(0,b.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ie=function(e){var t=e.privacyDeclaration,n=e.onEdit,r=e.onDelete,o=e.includeCustomFields,s=e.includeCookies,a=(0,g.Z)(e,ee),l=$(re({initialValues:t,onSubmit:function(e){return n(t,e)},privacyDeclarationId:t.id},a)),c=l.initialValues,d=l.renderHeader,f=l.handleSubmit;return(0,u.jsx)(V.Qd,{children:function(e){var n=e.isExpanded;return(0,u.jsx)(M.J9,{enableReinitialize:!0,initialValues:c,onSubmit:f,validationSchema:K,children:function(e){var l=e.dirty;return(0,u.jsxs)(M.l0,{"data-testid":"".concat(t.data_use,"-form"),children:[(0,u.jsx)(p.Gt,{id:"".concat(t.id,"-form"),name:t.id}),(0,u.jsxs)(V.KF,{py:4,borderBottomWidth:n?"0px":"1px",backgroundColor:n?"gray.50":void 0,"data-testid":"accordion-header-".concat(t.data_use),children:[d({dirty:l,boxProps:{flex:"1",textAlign:"left"},hideSaved:!n}),(0,u.jsx)(V.XE,{})]}),(0,u.jsx)(V.Hk,{backgroundColor:"gray.50",pt:0,children:(0,u.jsx)(i.Kq,{spacing:4,children:(0,u.jsx)(Q,re({privacyDeclarationId:t.id,onDelete:r,includeCustomFields:o,includeCookies:s},a))})})]})}})}})},oe=function(e){var t=e.privacyDeclarations,n=(0,g.Z)(e,te);return(0,u.jsx)(V.UQ,{allowToggle:!0,border:"transparent","data-testid":"privacy-declaration-accordion",children:t.map((function(e){return(0,u.jsx)(ie,re({privacyDeclaration:e},n),e.id)}))})},se=["system","addButtonProps","includeCustomFields","includeCookies","onSave"];function ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(n),!0).forEach((function(t){(0,b.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ce=function(e){var t=e.system,n=e.addButtonProps,o=e.includeCustomFields,s=e.includeCookies,a=e.onSave,l=(0,g.Z)(e,se),c=(0,_.pm)(),d=(0,Z.qQ)(),p=(0,S.Z)(d,1)[0],f=(0,r.useState)(!1),h=f[0],x=f[1],m=(0,r.useState)(void 0),b=m[0],v=m[1],y=(0,r.useMemo)((function(){return b?t.privacy_declarations.filter((function(e){return e.id!==b.id})):t.privacy_declarations}),[b,t]),O=function(e){return y.filter((function(t){return t.data_use===e.data_use&&t.name===e.name})).length>0&&(c((0,I.Vo)("A declaration already exists with that data use in this system. Please supply a different data use.")),!0)},w=function(){var e=(0,k.Z)(D().mark((function e(n,r){var i,o,s,l;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.map((function(e){var t;return le(le({},e),{},{name:null!==(t=e.name)&&void 0!==t?t:""})})),o=le(le({},t),{},{privacy_declarations:i}),s=function(e){if(!(0,F.isErrorResult)(e))return c.closeAll(),c((0,I.t5)(r?"Data use deleted":"Data use saved")),a&&a(e.data),e.data.privacy_declarations;var t=(0,z.e$)(e.error,"An unexpected error occurred while updating the system. Please try again.");c((0,I.Vo)(t))},e.next=5,p(o);case 5:return l=e.sent,e.abrupt("return",s(l));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),P=function(){var e=(0,k.Z)(D().mark((function e(n,r){var i;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.id===n.id||!O(r)){e.next=2;break}return e.abrupt("return",void 0);case 2:return i=t.privacy_declarations.map((function(e){return e.id===n.id?r:e})),e.abrupt("return",w(i));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),V=function(){var e=(0,k.Z)(D().mark((function e(t){var n,r,i;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!O(t)){e.next=2;break}return e.abrupt("return",void 0);case 2:return c.closeAll(),n=[].concat((0,C.Z)(y),[t]),e.next=6,w(n);case 6:return(r=e.sent)&&(i=r.filter((function(e){return(!e.name||e.name===t.name)&&e.data_use===t.data_use}))[0],v(i)),e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=(0,k.Z)(D().mark((function e(n){var r;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.privacy_declarations.filter((function(e){return e.id!==n.id})),e.abrupt("return",w(r,!0));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=(0,k.Z)(D().mark((function e(t){var n;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M(t);case 2:return(n=e.sent)&&(x(!1),v(void 0)),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=t.privacy_declarations.length>0||0===t.privacy_declarations.length&&!h;return(0,r.useEffect)((function(){x(!1)}),[t.fides_key]),(0,u.jsxs)(i.Kq,{spacing:3,children:[(0,u.jsx)(oe,le({privacyDeclarations:y,onEdit:P,onDelete:M,includeCustomFields:o,includeCookies:s},l)),h?(0,u.jsx)(i.xu,{backgroundColor:"gray.50",p:4,"data-testid":"new-declaration-form",children:(0,u.jsx)(J,le({initialValues:b,onSubmit:V,onDelete:T,includeCustomFields:o,includeCookies:s},l))}):null,R?(0,u.jsx)(i.xu,{py:2,children:(0,u.jsx)(E.u,{label:"Add a Data Use",hasArrow:!0,placement:"top",isDisabled:0===y.length,children:(0,u.jsx)(j.zx,le(le({colorScheme:"primary",size:"xs","data-testid":"add-btn",onClick:function(){x(!0),v(void 0)},disabled:h&&!b},n),{},{children:"Add a Data Use +"}))})}):null]})},ue=n(9198),de=n(60041);function pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(n),!0).forEach((function(t){(0,b.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var he={name:"",description:""},xe=function(e){var t,n=e.system,r="/systems/configure/".concat(n.fides_key),o=function(e){var t=(0,Z.dB)(),n=(0,S.Z)(t,1)[0],r=(0,_.pm)(),i=function(){var t=(0,k.Z)(D().mark((function t(i,o){var s,a;return D().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=[fe(fe({},e),{},{name:i.name,description:i.description})],t.next=3,n(s);case 3:a=t.sent,(0,de.D4)(a)?r((0,I.Vo)((0,z.e$)(a.error))):(r((0,I.t5)("Successfully saved system info")),o.resetForm({values:i}));case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();return{handleUpsertSystem:i,validationSchema:A.Ry().shape({name:A.Z_().required().label("Name"),description:A.Z_().required().label("Description")})}}(n),s=o.handleUpsertSystem,a=o.validationSchema;return(0,u.jsxs)(i.xu,{children:[(0,u.jsxs)(i.kC,{alignItems:"center",children:[(0,u.jsx)(i.xv,{color:"gray.600",size:"md",lineHeight:6,fontWeight:"semibold",marginBottom:2,children:"System details"}),(0,u.jsx)(i.LZ,{}),(0,u.jsxs)(ue._p,{color:"complimentary.500",href:r,children:["View more",(0,u.jsx)(y.h0,{ml:2})]})]}),(0,u.jsx)(i.xu,{width:"100%",padding:4,borderTop:"1px solid",borderColor:"gray.200",children:(0,u.jsx)(M.J9,{enableReinitialize:!0,initialValues:null!==(t=n)&&void 0!==t?t:he,validationSchema:a,onSubmit:s,children:function(e){var t=e.isSubmitting,n=e.dirty,r=e.isValid;return(0,u.jsxs)(M.l0,{children:[(0,u.jsx)(p.Gt,{id:"SystemInfo",name:"System Info"}),(0,u.jsx)(i.xu,{marginTop:3,children:(0,u.jsx)(H.j0,{label:"System name",name:"name",variant:"stacked"})}),(0,u.jsx)(i.xu,{marginTop:3,children:(0,u.jsx)(H.Ks,{label:"System Description",name:"description",variant:"stacked"})}),(0,u.jsx)(i.kC,{marginTop:6,justifyContent:"flex-end",children:(0,u.jsx)(j.zx,{textAlign:"right",type:"submit",disabled:!n||!r,colorScheme:"primary",isLoading:t,size:"sm",children:"Save"})})]})}})})]})},me=["isLoading"];function be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?be(Object(n),!0).forEach((function(t){(0,b.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ve=function(e){var t,n=e.selectedSystemId,o=e.resetSelectedSystemId,s=(0,r.useMemo)((function(){return Boolean(n)}),[n]),a=(0,w.f)({includeDatasets:!1,includeDisabled:!1}),l=(a.isLoading,(0,g.Z)(a,me)),c=(0,Z.rn)(n,{skip:!n}).data;return(0,u.jsx)(i.xu,{position:"absolute",pointerEvents:"none",top:0,left:0,right:0,bottom:0,overflow:"hidden",children:(0,u.jsx)(v.Mi,{transition:{enter:{ease:"easeInOut",duration:.5},exit:{ease:"easeInOut",duration:.5}},direction:"right",in:s,unmountOnExit:!0,style:{zIndex:11,pointerEvents:"none",position:"absolute"},children:(0,u.jsxs)(i.xu,{position:"absolute",right:"0px",height:"100%",width:"100%",maxWidth:"480px",pointerEvents:"auto",borderWidth:0,boxShadow:"0px 20px 25px -5px rgba(0, 0, 0, 0.1), 0px 10px 10px -5px rgba(0, 0, 0, 0.04)",display:n?"unset":"none",backgroundColor:"white",children:[(0,u.jsx)(i.xu,{id:"drawer-header",borderBottomWidth:1,paddingX:6,paddingY:3,children:(0,u.jsxs)(i.kC,{children:[(0,u.jsx)(i.kC,{justifyContent:"space-between",alignItems:"center",height:"40px",children:(0,u.jsx)(i.xv,{fontWeight:"semibold",fontSize:"lg",lineHeight:"7",color:"gray.900",children:null!==(t=null===c||void 0===c?void 0:c.name)&&void 0!==t?t:"System Information"})}),(0,u.jsx)(i.LZ,{}),(0,u.jsx)(i.kC,{alignItems:"center",children:(0,u.jsx)(j.hU,{icon:(0,u.jsx)(y.Tw,{}),"aria-label":"Close error message",size:"sm",style:{height:"24px",width:"24px",minWidth:"14px",backgroundColor:"#00000000"},onClick:o})})]})}),(0,u.jsx)(i.xu,{id:"drawer-body",height:"calc(100% - 46px)",overflowY:"auto",padding:6,style:{scrollbarGutter:"stable"},children:c?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(xe,{system:c}),(0,u.jsx)(i.xv,{size:"md",color:"gray.600",lineHeight:6,fontWeight:"semibold",mt:"10px",mb:2,children:"Data uses"}),(0,u.jsx)(i.xu,{borderTop:"1px solid",borderColor:"gray.200",children:(0,u.jsx)(i.xu,{pb:3,children:(0,u.jsx)(ce,ge({system:c,addButtonProps:{ml:4}},l))})}),(0,u.jsx)(i.xv,{size:"md",color:"gray.600",lineHeight:6,fontWeight:"semibold",mt:"10px",mb:2,paddingBottom:2,children:"Data flow"}),(0,u.jsx)(O.q,{system:c})]}):null})]})})})},je=n(66521),ye=n(60378),Oe=n(47134),we=n(75846),Ce=n(63138),ke=n(14221),Se=n(75523),Pe=function(e){var t=e.column,n=e.value,o=function(){var e=r.useState(!1),t=(0,S.Z)(e,2),n=t[0],i=t[1],o=r.useState(!1),s=(0,S.Z)(o,2),a=s[0],l=s[1];return{mouseOver:a,isCellExpanded:n,handleToggleExpanded:function(){return i(!n)},handleMouseEnter:function(){l(!0)},handleMouseLeave:function(){l(!1)}}}(),s=o.isCellExpanded,a=o.handleMouseEnter,l=o.handleMouseLeave,c=o.handleToggleExpanded,d=o.mouseOver,p=function(e){var t,n,r,i,o=e.column,s=e.value,a=(0,m.C)(Se.L5),l=(0,m.C)(we.C3),c=(0,m.C)(Oe.FG);if(o.id===ke.Ux)return{label:(s.split(", ").length?s.split(", ").map((function(e){var t,n;return null!==(t=null===(n=a.get(e))||void 0===n?void 0:n.name)&&void 0!==t?t:e})).join(", "):void 0)||(null!==(t=null===(n=a.get(s))||void 0===n?void 0:n.name)&&void 0!==t?t:s),expanded:s};if(o.id===ke.vy)return{label:s,expanded:null!==(r=null===(i=l.get(s))||void 0===i?void 0:i.fides_key)&&void 0!==r?r:s};if(o.id===ke.OL){var u,d,p=s.split(", ").length?s.split(", ").map((function(e){var t,n;return null!==(t=null===(n=c.get(e))||void 0===n?void 0:n.fides_key)&&void 0!==t?t:e})).join(", "):void 0;return{label:s,expanded:p||(null!==(u=null===(d=c.get(s))||void 0===d?void 0:d.fides_key)&&void 0!==u?u:s)}}return{label:s}}({column:t,value:n});return(0,u.jsx)(i.xu,{position:"relative",onMouseEnter:a,onMouseLeave:l,height:"100%",children:(0,u.jsxs)(i.xu,{display:"flex",justifyContent:"space-between",alignItems:"center",height:"100%",children:[(0,u.jsxs)(i.xu,{overflow:"hidden",flex:1,p:2,children:[(0,u.jsx)(i.xv,{fontSize:"xs",lineHeight:4,fontWeight:"medium",color:"gray.600",isTruncated:!s,children:p.label}),s&&p.expanded!==p.label?(0,u.jsx)(i.xu,{fontStyle:"italic",mt:2,children:(0,u.jsx)(i.xv,{fontSize:"xs",lineHeight:4,fontWeight:"medium",color:"gray.600",children:p.expanded})}):null]}),(d||s)&&p.expanded&&""!==p.expanded?(0,u.jsx)("button",{type:"button",style:{position:"relative",right:"10px"},onClick:function(e){e.stopPropagation(),c()},children:s?(0,u.jsx)(R.O1,{width:"18px",height:"18px",my:"-4px"}):(0,u.jsx)(R.mC,{width:"18px",height:"18px",my:"-4px"})}):null]})})},De=n(76459),_e=n(77751);function Ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ze(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(n),!0).forEach((function(t){(0,b.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ie=function(e){var t,n,r,o=e.option,s=e.columnId,a=e.filterValue,l=e.toggleFilterOption,c=(0,m.C)(Se.L5),d=s===ke.Ux&&null!==(t=null===(n=c.get(o))||void 0===n?void 0:n.name)&&void 0!==t?t:o;return(0,u.jsx)(_e.XZ,{value:o,width:"193px",height:"20px",mb:"25px",isChecked:null!==(r=a[o])&&void 0!==r&&r,onChange:function(e){var t=e.target;l(o,t.checked)},_focusWithin:{bg:"gray.100"},colorScheme:"complimentary",children:(0,u.jsx)(i.xv,{fontSize:"sm",lineHeight:5,height:"20px",width:"170px",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",children:d})},o)};function Ze(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ze(Object(n),!0).forEach((function(t){(0,b.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ze(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ve={minWidth:30,width:150,maxWidth:300,Cell:Pe,Filter:function(e){var t=e.column,n=function(e){var t,n=(0,r.useContext)(De.Z).tableInstance,i=r.useMemo((function(){var t=new Set;return e.preFilteredRows.forEach((function(n){t.add(n.values[e.id])})),Array.from(t)}),[e.id,e.preFilteredRows]),o=r.useMemo((function(){var e={};return i.forEach((function(t){e[t]=!1})),e}),[i]);return{filterValue:null!==(t=e.filterValue)&&void 0!==t?t:o,clearFilterOptions:function(){var t={};i.forEach((function(e){t[e]=!1})),e.setFilter(t)},toggleFilterOption:function(t,r){var i,s=ze(ze({},null!==(i=e.filterValue)&&void 0!==i?i:o),{},(0,b.Z)({},t,r));Object.values(s).every((function(e){return!e}))?null===n||void 0===n||n.setAllFilters(null===n||void 0===n?void 0:n.state.filters.filter((function(t){return t.id!==e.id}))):e.setFilter(s)},options:i,header:e.Header}}(t),o=n.filterValue,s=n.toggleFilterOption,a=n.options,l=(0,r.useState)(!1),c=l[0],d=l[1],p=c?a:a.slice(0,15),f=a.length>15;return(0,u.jsx)(V.UQ,{width:"100%",allowToggle:!0,children:(0,u.jsxs)(V.Qd,{border:"0px",children:[(0,u.jsx)(i.X6,{height:"56px",children:(0,u.jsxs)(V.KF,{height:"100%",children:[(0,u.jsx)(i.xu,{flex:"1",alignItems:"center",justifyContent:"center",textAlign:"left",children:t.Header}),(0,u.jsx)(V.XE,{})]})}),(0,u.jsxs)(V.Hk,{children:[(0,u.jsx)(i.MI,{columns:3,children:p.map((function(e){return(0,u.jsx)(Ie,{columnId:t.id,option:e,filterValue:o,toggleFilterOption:s},e)}))}),!c&&f?(0,u.jsx)(j.zx,{size:"sm",variant:"ghost",onClick:function(){d(!0)},children:"View more"}):null,c&&f?(0,u.jsx)(j.zx,{size:"sm",variant:"ghost",onClick:function(){d(!1)},children:"View less"}):null]})]})},t.id)},filter:"multifield"},Me={multifield:function(e,t,n){var r=t[0];return e.filter((function(e){var t=e.values[r];return n[t]}))}},Te=n(30794),Re=n(29470),We=n(60245),Ae=n(55232),Ge=n(61561),He=n(85249),Be=n(60530),Le=n(68972),Ue=n(2926),Xe=n(34522),qe=function(e){var t=e.isOpen,n=e.onClose,o=(0,r.useRef)(null),s=(0,r.useContext)(De.Z).tableInstance;if(!s)return null;var a=function(e,t){if(!e||!e.columns||!e.rows)return"";var n=e.columns,r=e.rows;if("csv"===t)return(0,Le.P)([n].concat((0,C.Z)(r)));var i=Xe.P6.aoa_to_sheet([n].concat((0,C.Z)(r))),o=Xe.P6.book_new();return Xe.P6.book_append_sheet(o,i,"Datamap"),o},l=function(e,t){var n=(new Date).toISOString(),r="report_".concat(n,".").concat(t);if("string"===typeof e){if("csv"===t){var i=new Blob([e],{type:"text/csv;charset=utf-8"});(0,Ue.saveAs)(i,r)}}else(0,Xe.Fv)(e,r)},c=function(){var e=(0,k.Z)(D().mark((function e(t){var r,i;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n(),s){e.next=3;break}return e.abrupt("return");case 3:r={columns:s.columns.filter((function(e){return e.isVisible})).map((function(e){return e.Header})),rows:s.rows.map((function(e){return e.subRows})).flatMap((function(e){return e})).map((function(e){return e.cells.map((function(e){return e.value}))}))},i=a(r,t),l(i,t);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,u.jsxs)(Be.u_,{initialFocusRef:o,isCentered:!0,isOpen:t,onClose:n,size:"lg",children:[(0,u.jsx)(Be.ZA,{}),(0,u.jsxs)(Be.hz,{minWidth:"605px",children:[(0,u.jsx)(Be.xB,{children:(0,u.jsxs)(i.kC,{flexDir:"column",gap:"16px",children:[(0,u.jsx)(i.xv,{children:"Export"}),(0,u.jsx)(i.iz,{color:"gray.200"})]})}),(0,u.jsx)(Be.ol,{}),(0,u.jsx)(Be.fe,{pb:"8px",pt:"8px",children:(0,u.jsx)(i.kC,{justifyContent:"center",width:"100%",children:(0,u.jsx)(i.xv,{fontSize:"sm",lineHeight:"20px",children:"To export the current view of the Data Map table, please select the appropriate format below. Your export will contain only the visible columns and rows."})})}),(0,u.jsx)(Be.mz,{children:(0,u.jsxs)(i.kC,{borderTop:"1px solid",borderTopColor:"gray.200",justifyContent:"space-between",pt:"24px",width:"100%",children:[(0,u.jsx)(j.zx,{colorScheme:"primary",size:"sm",mr:3,flexGrow:1,onClick:function(){return c("xlsx")},children:"Export Excel (.xls)"}),(0,u.jsx)(j.zx,{colorScheme:"primary",size:"sm",flexGrow:1,onClick:function(){return c("csv")},children:"Export CSV (.csv)"})]})})]})]})},Ke=function(e){var t=e.heading,n=e.children;return(0,u.jsxs)(i.xu,{padding:"24px 8px 8px 24px",children:[(0,u.jsx)(i.X6,{size:"md",lineHeight:6,fontWeight:"bold",mb:2,children:t}),n]})},Ye=function(e){var t=e.isOpen,n=e.onClose,o=(0,r.useContext)(De.Z).tableInstance,s=(0,r.useMemo)((function(){return o||{headerGroups:[]}}),[o]).headerGroups,a=function(e,t){return e.filter((function(e){return e.id===t})).map((function(e){return e.render("Filter",{key:e.id})}))},l=function(e,t){return e.some((function(e){return t.indexOf(e.id)>-1}))},c=(0,r.useMemo)((function(){return s.length>0?s[0].headers.map((function(e){return e})):[]}),[s]);return(0,u.jsxs)(Be.u_,{isOpen:t,onClose:n,isCentered:!0,size:"2xl",children:[(0,u.jsx)(Be.ZA,{}),(0,u.jsxs)(Be.hz,{children:[(0,u.jsx)(Be.xB,{children:"Filters"}),(0,u.jsx)(Be.ol,{}),(0,u.jsx)(i.iz,{}),(0,u.jsxs)(Be.fe,{maxH:"85vh",padding:"0px",overflowX:"auto",children:[l(c,[ke.vy,ke.Ux,ke.OL])?(0,u.jsxs)(Ke,{heading:"Privacy attributes",children:[a(c,ke.vy),a(c,ke.Ux),a(c,ke.OL)]}):null,l(c,[ke.eK])?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(i.iz,{}),(0,u.jsx)(Ke,{heading:"Responsibility",children:a(c,ke.eK)})]}):null]}),(0,u.jsx)(Be.mz,{children:(0,u.jsxs)(i.xu,{display:"flex",justifyContent:"space-between",width:"100%",children:[(0,u.jsx)(j.zx,{variant:"outline",size:"sm",mr:3,onClick:function(){null===o||void 0===o||o.setAllFilters([])},flexGrow:1,children:"Reset Filters"}),(0,u.jsx)(j.zx,{colorScheme:"primary",size:"sm",onClick:n,flexGrow:1,children:"Done"})]})})]})]})},Ne=n(92975),Qe=n(62709),$e=n(20294),Je=n(65201),et=n(36737),tt=n(22348);function nt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var rt=function(e){var t=e.id,n=e.index,o=e.isVisible,s=e.moveColumn,a=e.setColumnVisible,l=e.text,c=function(e){var t=e.id,n=e.index,i=e.moveColumn,o=e.setColumnVisible,s=(0,r.useRef)(null),a=(0,et.L)({accept:ke._Q.DraggableColumnListItem,collect:function(e){return{handlerId:e.getHandlerId()}},hover:function(e,t){var r;if(s.current){var o=e.index,a=n;if(o!==a){var l=null===(r=s.current)||void 0===r?void 0:r.getBoundingClientRect(),c=(l.bottom-l.top)/2,u=t.getClientOffset().y-l.top;o<a&&u<c||o>a&&u>c||(i(o,a),Object.assign(e,{index:a}))}}}}),l=(0,S.Z)(a,2),c=l[0].handlerId,u=l[1],d=(0,tt.c)({type:ke._Q.DraggableColumnListItem,item:function(){return{id:t,index:n}},collect:function(e){return{isDragging:!!e.isDragging()}}}),p=(0,S.Z)(d,3),f=p[0].isDragging,h=p[1],x=p[2];return h(u(s)),{isDragging:f,ref:s,handlerId:c,preview:x,handleColumnVisibleToggle:function(e){o(n,e.target.checked)}}}({index:n,id:t,moveColumn:s,setColumnVisible:a}),d=c.ref,p=c.isDragging,f=c.handlerId,h=c.preview,x=c.handleColumnVisibleToggle;return(0,u.jsxs)(i.HC,{alignItems:"center",display:"flex",minWidth:0,ref:h,"data-handler-id":f,opacity:p?.2:1,children:[(0,u.jsx)(i.xu,{ref:d,cursor:p?"grabbing":"grab",children:(0,u.jsx)(i.DE,{as:R.zG,color:"gray.300",flexShrink:0,height:"20px",width:"20px",_hover:{color:"gray.700"}})}),(0,u.jsxs)(Ne.NI,{alignItems:"center",display:"flex",minWidth:0,title:l,children:[(0,u.jsx)(Ne.lX,{color:"gray.700",fontSize:"normal",fontWeight:400,htmlFor:"".concat(t),mb:"0",minWidth:0,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",flexGrow:1,children:l}),(0,u.jsx)(Qe.r,{colorScheme:"complimentary",id:"".concat(t),mr:2,isChecked:o,onChange:x})]})]})},it=function(e){var t=e.columns,n=(0,r.useState)(null!==t&&void 0!==t?t:[]),i=n[0],o=n[1];return(0,r.useEffect)((function(){o((null===t||void 0===t?void 0:t.map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nt(Object(n),!0).forEach((function(t){(0,b.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e)})))||[])}),[t]),{columns:i,moveColumn:(0,r.useCallback)((function(e,t){o((function(n){return(0,Je.ZP)(n,(function(n){var r=n[e];n.splice(e,1),n.splice(t,0,r)}))}))}),[]),setColumnVisible:(0,r.useCallback)((function(e,t){o((function(n){return(0,Je.ZP)(n,(function(n){n[e]&&(n[e].isVisible=t)}))}))}),[])}},ot=function(e){var t=e.isOpen,n=e.onClose,o=(0,We.I0)(),s=(0,m.C)(Ge.eo),a=it({columns:s}),l=(0,r.useCallback)((function(){o((0,Ge.Bx)(a.columns)),n()}),[n,o,a.columns]);return(0,u.jsxs)(Be.u_,{isOpen:t,onClose:n,isCentered:!0,size:"2xl",children:[(0,u.jsx)(Be.ZA,{}),(0,u.jsxs)(Be.hz,{children:[(0,u.jsx)(Be.xB,{pb:0,children:"Data Map Settings"}),(0,u.jsx)(Be.ol,{}),(0,u.jsxs)(Be.fe,{children:[(0,u.jsx)(i.xv,{fontSize:"sm",color:"gray.500",mb:2,children:"You can toggle columns on and off to hide or show them in the table. Additionally, you can drag columns up or down to change the order"}),(0,u.jsxs)($e.mQ,{colorScheme:"complimentary",children:[(0,u.jsx)($e.td,{children:(0,u.jsx)($e.OK,{color:"complimentary.500",children:"Columns"})}),(0,u.jsx)($e.nP,{children:(0,u.jsx)($e.x4,{p:0,pt:4,maxHeight:"270px",overflowY:"scroll",children:(0,u.jsx)(i.aV,{spacing:4,children:a.columns.filter((function(e){return e.value!==ke.Br})).map((function(e,t){return(0,u.jsx)(rt,{id:e.id,index:t+1,isVisible:e.isVisible,moveColumn:a.moveColumn,setColumnVisible:a.setColumnVisible,text:e.text},e.id)}))})})})]})]}),(0,u.jsx)(Be.mz,{children:(0,u.jsxs)(i.xu,{display:"flex",justifyContent:"space-between",width:"100%",children:[(0,u.jsx)(j.zx,{variant:"outline",size:"sm",mr:3,onClick:n,flexGrow:1,children:"Cancel"}),(0,u.jsx)(j.zx,{colorScheme:"primary",size:"sm",onClick:l,flexGrow:1,children:"Save"})]})})]})]})},st=function(){var e=(0,We.I0)(),t=function(){var e=(0,m.C)(Ge.hd),t=(0,T.qY)(),n=t.isOpen,r=t.onOpen,i=t.onClose,o=(0,T.qY)(),s=o.isOpen,a=o.onOpen,l=o.onClose,c=(0,T.qY)();return{isExportModalOpen:n,isMapOpen:e,isSettingsModalOpen:s,isFilterModalOpen:c.isOpen,onSettingsModalOpen:a,onSettingsModalClose:l,onFilterModalOpen:c.onOpen,onFilterModalClose:c.onClose,onExportClick:function(){r()},onExportModalClose:i,onExportModalOpen:r}}(),n=t.isExportModalOpen,o=t.isFilterModalOpen,s=t.isSettingsModalOpen,a=t.onSettingsModalOpen,l=t.onSettingsModalClose,c=t.onFilterModalOpen,d=t.onFilterModalClose,p=t.onExportClick,f=t.onExportModalClose,h=t.isMapOpen,x=(0,r.useContext)(De.Z).tableInstance;if(!x)return null;var b=null===x||void 0===x?void 0:x.state.filters.map((function(e){return Object.values(e.value)})).flatMap((function(e){return e})).filter((function(e){return!0===e})).length;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(i.kC,{justifyContent:"flex-end",flexDirection:"row",alignItems:"center",flexWrap:"wrap",rowGap:4,columnGap:4,children:[(0,u.jsx)(i.kC,{flexGrow:1,children:(0,u.jsx)(He.Z,{globalFilter:x.state.globalFilter,setGlobalFilter:x.setGlobalFilter})}),(0,u.jsxs)(i.kC,{children:[(0,u.jsxs)(j.zx,{"aria-label":"Open Filter Settings",variant:"solid",backgroundColor:"#824EF2",color:"white",size:"sm",marginRight:4,onClick:c,_hover:{opacity:.8},_active:{opacity:.8},rightIcon:(0,u.jsx)(R.r1,{}),children:["Filter",b>0?(0,u.jsx)(Te.Vp,{ml:2,backgroundColor:"complimentary.800",borderRadius:"full",color:"white",children:b}):null]}),(0,u.jsxs)(j.hE,{isAttached:!0,size:"sm",marginRight:4,children:[(0,u.jsx)(j.zx,{colorScheme:h?"primary":void 0,onClick:function(){e((0,Ge.kE)("map"))},"data-testid":"map-btn",children:"Map"}),(0,u.jsx)(j.zx,{colorScheme:h?void 0:"primary",onClick:function(){e((0,Ge.kE)("table"))},"data-testid":"table-btn",children:"Table"})]}),(0,u.jsx)(j.hU,{"aria-label":"Open Column Settings",variant:"ghost",size:"sm",marginRight:1,onClick:a,icon:(0,u.jsx)(Ae.A5,{})}),(0,u.jsx)(Re.v2,{children:(0,u.jsx)(Re.j2,{as:j.hU,"aria-label":"Export data",icon:(0,u.jsx)(Ae.nM,{}),onClick:p,size:"sm",variant:"ghost"})})]})]}),(0,u.jsx)(Ye,{isOpen:o,onClose:d}),(0,u.jsx)(qe,{isOpen:n,onClose:f}),(0,u.jsx)(ot,{isOpen:s,onClose:l})]})},at=n(40240),lt=["key"],ct=["key"];function ut(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ut(Object(n),!0).forEach((function(t){(0,b.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ut(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var pt=function(){return(0,u.jsx)(at.Th,{padding:0,margin:0,width:4,borderBottomColor:"gray.200",boxSizing:"border-box"})},ft=function(e){var t=e.headerGroups;return(0,u.jsx)(at.hr,{position:"sticky",top:"0px",height:"36px",zIndex:10,backgroundColor:ke.pE,children:t.map((function(e){var t=e.getHeaderGroupProps(),n=t.key,r=(0,g.Z)(t,lt);return(0,u.jsxs)(at.Tr,dt(dt({},r),{},{height:"inherit",children:[(0,u.jsx)(pt,{}),e.headers.map((function(e,t){var n=e.getHeaderProps(),r=n.key,o=(0,g.Z)(n,ct);return(0,u.jsxs)(at.Th,dt(dt({},o),{},{title:"".concat(e.Header),textTransform:"none",px:2,display:"flex",alignItems:"center",borderLeftWidth:0===t?"1px":"",borderRightWidth:"1px",borderColor:"gray.200",children:[(0,u.jsx)(i.xv,{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",mr:1,children:e.render("Header")}),e.canResize&&(0,u.jsx)(i.xu,dt(dt({},e.getResizerProps()),{},{position:"absolute",top:0,right:0,width:2,height:"100%",css:{touchAction:":none"}}))]}),r)})),(0,u.jsx)(pt,{})]}),n)}))})},ht=["key"],xt=["key"];function mt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mt(Object(n),!0).forEach((function(t){(0,b.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var gt=function(e){var t=e.setSelectedSystemId,n=(0,r.useContext)(De.Z).tableInstance;if(!n)return null;var o=n.getTableProps,s=n.getTableBodyProps,a=n.headerGroups,l=n.prepareRow,c=n.rows;return(0,u.jsx)(i.xu,{boxSize:"100%",overflow:"auto",children:(0,u.jsxs)(at.iA,bt(bt({},o()),{},{size:"sm","data-testid":"datamap-table",children:[(0,u.jsx)(ft,{headerGroups:a}),(0,u.jsx)(at.p3,bt(bt({backgroundColor:ke.pE},s()),{},{children:c.map((function(e){return l(e),[(0,r.createElement)(at.Tr,bt(bt({},e.getRowProps()),{},{borderTopLeftRadius:"6px",borderTopRightRadius:"6px",height:"70px",backgroundColor:"gray.50",borderWidth:"1px",borderBottom:"none",mt:4,ml:4,mr:4,key:e.groupByVal}),(0,u.jsxs)(at.Td,bt(bt({colSpan:e.cells.length},e.cells[0].getCellProps()),{},{width:"auto",paddingX:2,children:[(0,u.jsx)(i.xv,{fontSize:"xs",lineHeight:4,fontWeight:"500",color:"gray.600",textTransform:"uppercase",pb:2,pt:1,children:"System Name"}),(0,u.jsx)(i.xv,{fontSize:"sm",lineHeight:5,fontWeight:"bold",color:"gray.600",children:e.groupByVal})]}))),e.subRows.map((function(n,r){l(n);var i=n.getRowProps(),o=i.key,s=(0,g.Z)(i,ht);return(0,u.jsx)(at.Tr,bt(bt({minHeight:9,borderWidth:"1px",borderColor:"gray.200",borderTop:"none",borderBottomLeftRadius:r===e.subRows.length-1?"6px":"",borderBottomRightRadius:r===e.subRows.length-1?"6px":""},s),{},{_hover:{bg:"gray.50"},cursor:"pointer",backgroundColor:"white",onClick:function(){n.values[ke.sD]&&t(n.values[ke.sD])},ml:4,mr:4,_last:{mb:4},children:n.cells.map((function(e,t){var r=e.getCellProps(),i=r.key,o=(0,g.Z)(r,xt);return(0,u.jsx)(at.Td,bt(bt({},o),{},{borderRightWidth:t===n.cells.length-1?"":"1px",borderBottom:"none",borderColor:"gray.200",padding:0,children:e.render("Cell")}),i)}))}),o)}))]}))}))]}))})},vt=n(60709),jt=function(){return(0,u.jsx)(i.M5,{flex:1,"data-testid":"get-started-modal",backgroundColor:"gray.100",children:(0,u.jsx)(i.xu,{backgroundColor:"white",p:10,borderRadius:"6px",boxShadow:"0px 1px 3px rgba(0, 0, 0, 0.1), 0px 1px 2px rgba(0, 0, 0, 0.06)",maxWidth:{base:"80%",lg:"60%",xl:"50%"},maxHeight:"90%",textAlign:"center",children:(0,u.jsxs)(i.Kq,{spacing:4,children:[(0,u.jsx)(i.xv,{color:"gray.700",fontWeight:"600",children:"Privacy engineering can seem like an endlessly complex confluence of legal and data engineering terminology\u2014fear not\u2014Fides is here to simplify this."}),(0,u.jsx)(i.xv,{children:"Start by scanning your infrastructure. The scanner will connect to your infrastructure to automatically scan and create a list of all systems available and then classify each system containing PII."}),(0,u.jsx)(i.xv,{children:"Let's get started!"}),(0,u.jsx)(i.xu,{children:(0,u.jsx)(j.zx,{as:"a",href:vt.xo,width:"fit-content",colorScheme:"primary","data-testid":"add-systems-btn",children:"Add Systems"})})]})})})},yt=x()((function(){return Promise.all([n.e(4804),n.e(7670),n.e(6412)]).then(n.bind(n,53027))}),{ssr:!1,loadableGenerated:{webpack:function(){return[53027]}}}),Ot=function(){var e=function(){var e=(0,m.C)(Ge.hd),t=(0,m.C)(Ge.Xt),n=(0,r.useContext)(je.Y),i=(0,p.oI)().attemptAction,o=(0,r.useState)(),s=o[0],a=o[1],l=(0,r.useCallback)((function(e){i().then((function(t){t&&a(e)}))}),[i,a]),c=(0,r.useCallback)((function(){i().then((function(e){var t;e&&s&&(n.current&&(null===(t=n.current)||void 0===t||t.$id(s).unselect()),a(void 0))}))}),[i,n,s]);return{isMapOpen:e,isGettingStarted:t,selectedSystemId:s,setSelectedSystemId:l,resetSelectedSystemId:c}}(),t=e.isMapOpen,n=e.isGettingStarted,o=e.setSelectedSystemId,s=e.selectedSystemId,a=e.resetSelectedSystemId,l=function(){var e=(0,m.T)(),t=(0,r.useContext)(De.Z).updateTableInstance,n=(0,m.C)(Ce.eo),i=(0,Ce.Ex)({organizationName:"default_organization"}),o=i.data,s=i.isLoading;(0,Se.MO)(),(0,we.fd)(),(0,Oe.te)();var a=(0,r.useRef)(!1);(0,r.useEffect)((function(){if(o){var t=o.columns,n=o.rows;e((0,Ce.dd)(t)),a.current||(a.current=!0,0===n.length?e((0,Ce.ym)(!0)):e((0,Ce.ym)(!1)))}}),[o,e]);var l=(0,r.useMemo)((function(){return o?o.rows:[]}),[o]),c=(0,r.useMemo)((function(){return(n||[]).map((function(e){var t=e.text,n=e.value,r=e.isVisible;return{id:n,accessor:function(e){return e[n]},Header:t,isVisible:r,aggregate:function(e,t){var n=new Set(t);return e.forEach((function(e){n.has(e)||n.add(e)})),Array.from(n.values()).join(", ")}}}))}),[n]),u=(0,ye.useTable)({columns:c,data:l,defaultColumn:Ve,filterTypes:Me,initialState:{groupBy:[ke.Br,ke.vy]}},ye.useFilters,ye.useGlobalFilter,ye.useFlexLayout,ye.useResizeColumns,ye.useGroupBy,ye.useExpanded);return(0,r.useEffect)((function(){return t(u)}),[u,t]),(0,r.useEffect)((function(){u.setHiddenColumns((null===n||void 0===n?void 0:n.filter((function(e){return!e.isVisible})).map((function(e){return e.value})))||[])}),[n,u]),Fe(Fe({},u),{},{isLoading:s})}();return l.isLoading?(0,u.jsx)(i.M5,{width:"100%",flex:"1",children:(0,u.jsx)(f.$,{})}):n?(0,u.jsx)(jt,{}):(0,u.jsxs)(i.kC,{direction:"column",height:"100%",children:[(0,u.jsx)(i.xu,{marginBottom:3,marginRight:10,children:(0,u.jsx)(st,{})}),(0,u.jsxs)(i.kC,{position:"relative",flex:1,direction:"row",overflow:"auto",borderWidth:"1px",borderStyle:"solid",borderColor:"gray.200",children:[t?(0,u.jsx)(i.xu,{flex:1,minWidth:"50%",maxWidth:"100%",children:(0,u.jsx)(yt,{setSelectedSystemId:o})}):null,t?null:(0,u.jsx)(i.xu,{flex:1,minWidth:"50%",maxWidth:"100%",children:(0,u.jsx)(gt,{setSelectedSystemId:o})}),(0,u.jsx)(ve,{selectedSystemId:s,resetSelectedSystemId:a})]})]})},wt=function(){var e=(0,r.useMemo)((function(){return new De.m}),[]);return(0,u.jsx)(d,{title:"View Map",children:(0,u.jsx)(De.Z.Provider,{value:e,children:(0,u.jsxs)(je.Z,{children:[(0,u.jsx)(Ot,{}),(0,u.jsx)(p.eB,{})]})})})}},53910:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/datamap",function(){return n(45521)}])},36786:function(){},43197:function(){}},function(e){e.O(0,[9556,2141,5080,8301,8194,6733,9,5232,3119,7697,9774,2888,179],(function(){return t=53910,e(e.s=t);var t}));var t=e.O();_N_E=t}]);