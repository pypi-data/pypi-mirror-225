import{r as c,$ as C,j as r,e as I,ae as ce,al as de,P as fe,V as xe}from"./index-ff1743b2.js";import{u as pe,M as me,C as L}from"./Graph-12643de8.js";import{u as be}from"./context-e4b03e9a.js";import{g as le,i as he,S as re,D as B,y as U,s as Q,o as S,l as H,X as z,I as se,u as _,f as k,N as G,j as ge,a as w,O as D,M as y,z as ve}from"./transition-65d8b341.js";import{s as je}from"./popover-a777e0dc.js";import{v as K,M as we,P as ye}from"./disclosure-8eea5612.js";function Ne({onFocus:e}){let[t,n]=c.useState(!0);return t?C.createElement(le,{as:"button",type:"button",features:he.Focusable,onFocus:l=>{l.preventDefault();let s,a=50;function i(){if(a--<=0){s&&cancelAnimationFrame(s);return}if(e()){n(!1),cancelAnimationFrame(s);return}s=requestAnimationFrame(i)}s=requestAnimationFrame(i)}}):null}const ae=c.createContext(null);function Te(){return{groups:new Map,get(e,t){var n;let l=this.groups.get(e);l||(l=new Map,this.groups.set(e,l));let s=(n=l.get(t))!=null?n:0;l.set(t,s+1);let a=Array.from(l.keys()).indexOf(t);function i(){let p=l.get(t);p>1?l.set(t,p-1):l.delete(t)}return[a,i]}}}function Ie({children:e}){let t=c.useRef(Te());return c.createElement(ae.Provider,{value:t},e)}function ie(e){let t=c.useContext(ae);if(!t)throw new Error("You must wrap your component in a <StableCollection>");let n=Pe(),[l,s]=t.current.get(e,n);return c.useEffect(()=>s,[]),l}function Pe(){var e,t,n;let l=(n=(t=(e=c.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)==null?void 0:e.ReactCurrentOwner)==null?void 0:t.current)!=null?n:null;if(!l)return Symbol();let s=[],a=l;for(;a;)s.push(a.index),a=a.return;return"$."+s.join(".")}var Ee=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(Ee||{}),$e=(e=>(e[e.Less=-1]="Less",e[e.Equal=0]="Equal",e[e.Greater=1]="Greater",e))($e||{}),Se=(e=>(e[e.SetSelectedIndex=0]="SetSelectedIndex",e[e.RegisterTab=1]="RegisterTab",e[e.UnregisterTab=2]="UnregisterTab",e[e.RegisterPanel=3]="RegisterPanel",e[e.UnregisterPanel=4]="UnregisterPanel",e))(Se||{});let De={0(e,t){var n;let l=k(e.tabs,u=>u.current),s=k(e.panels,u=>u.current),a=l.filter(u=>{var g;return!((g=u.current)!=null&&g.hasAttribute("disabled"))}),i={...e,tabs:l,panels:s};if(t.index<0||t.index>l.length-1){let u=_(Math.sign(t.index-e.selectedIndex),{[-1]:()=>1,0:()=>_(Math.sign(t.index),{[-1]:()=>0,0:()=>0,1:()=>1}),1:()=>0});return a.length===0?i:{...i,selectedIndex:_(u,{0:()=>l.indexOf(a[0]),1:()=>l.indexOf(a[a.length-1])})}}let p=l.slice(0,t.index),m=[...l.slice(t.index),...p].find(u=>a.includes(u));if(!m)return i;let d=(n=l.indexOf(m))!=null?n:e.selectedIndex;return d===-1&&(d=e.selectedIndex),{...i,selectedIndex:d}},1(e,t){var n;if(e.tabs.includes(t.tab))return e;let l=e.tabs[e.selectedIndex],s=k([...e.tabs,t.tab],i=>i.current),a=(n=s.indexOf(l))!=null?n:e.selectedIndex;return a===-1&&(a=e.selectedIndex),{...e,tabs:s,selectedIndex:a}},2(e,t){return{...e,tabs:e.tabs.filter(n=>n!==t.tab)}},3(e,t){return e.panels.includes(t.panel)?e:{...e,panels:k([...e.panels,t.panel],n=>n.current)}},4(e,t){return{...e,panels:e.panels.filter(n=>n!==t.panel)}}},V=c.createContext(null);V.displayName="TabsDataContext";function R(e){let t=c.useContext(V);if(t===null){let n=new Error(`<${e} /> is missing a parent <Tab.Group /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,R),n}return t}let J=c.createContext(null);J.displayName="TabsActionsContext";function Z(e){let t=c.useContext(J);if(t===null){let n=new Error(`<${e} /> is missing a parent <Tab.Group /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Z),n}return t}function Ce(e,t){return _(t.type,De,e,t)}let Fe=c.Fragment;function Re(e,t){let{defaultIndex:n=0,vertical:l=!1,manual:s=!1,onChange:a,selectedIndex:i=null,...p}=e;const m=l?"vertical":"horizontal",d=s?"manual":"auto";let u=i!==null,g=U(t),[f,j]=c.useReducer(Ce,{selectedIndex:i??n,tabs:[],panels:[]}),b=c.useMemo(()=>({selectedIndex:f.selectedIndex}),[f.selectedIndex]),A=Q(a||(()=>{})),M=Q(f.tabs),h=c.useMemo(()=>({orientation:m,activation:d,...f}),[m,d,f]),v=S(x=>(j({type:1,tab:x}),()=>j({type:2,tab:x}))),P=S(x=>(j({type:3,panel:x}),()=>j({type:4,panel:x}))),E=S(x=>{$.current!==x&&A.current(x),u||j({type:0,index:x})}),$=Q(u?e.selectedIndex:f.selectedIndex),X=c.useMemo(()=>({registerTab:v,registerPanel:P,change:E}),[]);H(()=>{j({type:0,index:i??n})},[i]),H(()=>{if($.current===void 0||f.tabs.length<=0)return;let x=k(f.tabs,T=>T.current);x.some((T,o)=>f.tabs[o]!==T)&&E(x.indexOf(f.tabs[$.current]))});let Y={ref:g};return C.createElement(Ie,null,C.createElement(J.Provider,{value:X},C.createElement(V.Provider,{value:h},h.tabs.length<=0&&C.createElement(Ne,{onFocus:()=>{var x,T;for(let o of M.current)if(((x=o.current)==null?void 0:x.tabIndex)===0)return(T=o.current)==null||T.focus(),!0;return!1}}),z({ourProps:Y,theirProps:p,slot:b,defaultTag:Fe,name:"Tabs"}))))}let Ae="div";function Me(e,t){let{orientation:n,selectedIndex:l}=R("Tab.List"),s=U(t);return z({ourProps:{ref:s,role:"tablist","aria-orientation":n},theirProps:e,slot:{selectedIndex:l},defaultTag:Ae,name:"Tabs.List"})}let Le="button";function Oe(e,t){var n,l;let s=se(),{id:a=`headlessui-tabs-tab-${s}`,...i}=e,{orientation:p,activation:m,selectedIndex:d,tabs:u,panels:g}=R("Tab"),f=Z("Tab"),j=R("Tab"),b=c.useRef(null),A=U(b,t);H(()=>f.registerTab(b),[f,b]);let M=ie("tabs"),h=u.indexOf(b);h===-1&&(h=M);let v=h===d,P=S(o=>{var N;let q=o();if(q===G.Success&&m==="auto"){let oe=(N=ge(b))==null?void 0:N.activeElement,ne=j.tabs.findIndex(ue=>ue.current===oe);ne!==-1&&f.change(ne)}return q}),E=S(o=>{let N=u.map(q=>q.current).filter(Boolean);if(o.key===w.Space||o.key===w.Enter){o.preventDefault(),o.stopPropagation(),f.change(h);return}switch(o.key){case w.Home:case w.PageUp:return o.preventDefault(),o.stopPropagation(),P(()=>D(N,y.First));case w.End:case w.PageDown:return o.preventDefault(),o.stopPropagation(),P(()=>D(N,y.Last))}if(P(()=>_(p,{vertical(){return o.key===w.ArrowUp?D(N,y.Previous|y.WrapAround):o.key===w.ArrowDown?D(N,y.Next|y.WrapAround):G.Error},horizontal(){return o.key===w.ArrowLeft?D(N,y.Previous|y.WrapAround):o.key===w.ArrowRight?D(N,y.Next|y.WrapAround):G.Error}}))===G.Success)return o.preventDefault()}),$=c.useRef(!1),X=S(()=>{var o;$.current||($.current=!0,(o=b.current)==null||o.focus(),f.change(h),ve(()=>{$.current=!1}))}),Y=S(o=>{o.preventDefault()}),x=c.useMemo(()=>({selected:v}),[v]),T={ref:A,onKeyDown:E,onMouseDown:Y,onClick:X,id:a,role:"tab",type:je(e,b),"aria-controls":(l=(n=g[h])==null?void 0:n.current)==null?void 0:l.id,"aria-selected":v,tabIndex:v?0:-1};return z({ourProps:T,theirProps:i,slot:x,defaultTag:Le,name:"Tabs.Tab"})}let ke="div";function _e(e,t){let{selectedIndex:n}=R("Tab.Panels"),l=U(t),s=c.useMemo(()=>({selectedIndex:n}),[n]);return z({ourProps:{ref:l},theirProps:e,slot:s,defaultTag:ke,name:"Tabs.Panels"})}let Be="div",Ue=re.RenderStrategy|re.Static;function ze(e,t){var n,l,s,a;let i=se(),{id:p=`headlessui-tabs-panel-${i}`,tabIndex:m=0,...d}=e,{selectedIndex:u,tabs:g,panels:f}=R("Tab.Panel"),j=Z("Tab.Panel"),b=c.useRef(null),A=U(b,t);H(()=>j.registerPanel(b),[j,b]);let M=ie("panels"),h=f.indexOf(b);h===-1&&(h=M);let v=h===u,P=c.useMemo(()=>({selected:v}),[v]),E={ref:A,id:p,role:"tabpanel","aria-labelledby":(l=(n=g[h])==null?void 0:n.current)==null?void 0:l.id,tabIndex:v?m:-1};return!v&&((s=d.unmount)==null||s)&&!((a=d.static)!=null&&a)?C.createElement(le,{as:"span",...E}):z({ourProps:E,theirProps:d,slot:P,defaultTag:Be,features:Ue,visible:v,name:"Tabs.Panel"})}let qe=B(Oe),Ge=B(Re),We=B(Me),He=B(_e),Xe=B(ze),F=Object.assign(qe,{Group:Ge,List:We,Panels:He,Panel:Xe});function Ye({list:e,children:t=[],className:n}){return r.jsxs(F.List,{className:"w-full whitespace-nowrap px-2 py-0.5 flex justify-between items-center bg-primary-10 dark:bg-secondary-10",children:[r.jsx("div",{className:I("flex w-full overflow-hidden overflow-x-auto py-1 scrollbar scrollbar--horizontal",n),children:r.jsx("div",{className:"flex items-center bg-secondary-10 dark:bg-primary-10 cursor-pointer rounded-full p-1 overflow-hidden",children:e.map(l=>r.jsx(F,{className:({selected:s})=>I("text-xs px-2 py-0.5 mr-2 last:mr-0 rounded-full relative align-middle",s?"bg-secondary-500 text-secondary-100 cursor-default font-bold":"cursor-pointer font-medium text-secondary-400 dark:text-secondary-400"),children:l},l))})}),t]})}const ee=function({model:t,withModel:n=!0,withDescription:l=!0,withColumns:s=!0,withCode:a=!0,withQuery:i=!0}){const{handleClickModel:p}=be(),m=pe(t.path,d=>{p==null||p(d.name)});return r.jsxs(te,{children:[n&&r.jsx(W,{headline:"Model",defaultOpen:!0,children:r.jsxs("ul",{className:"px-2 w-full",children:[r.jsx(O,{name:"Path",value:t.path.split("/").slice(0,-1).join("/")}),r.jsx(O,{name:"Name",value:t.name}),r.jsx(O,{name:"Dialect",value:t.dialect}),r.jsx(O,{name:"Type",value:t.type}),Object.entries(t.details??{}).map(([d,u])=>r.jsx(O,{name:d.replaceAll("_"," "),value:u,isCapitalize:!0},d))]})}),l&&r.jsx(W,{headline:"Description",defaultOpen:!0,children:t.description==null?"No description":t.description}),s&&r.jsx(W,{headline:"Columns",children:r.jsx(me,{className:"max-h-[15rem]",nodeId:t.name,columns:t.columns,disabled:(t==null?void 0:t.type)==="python",withHandles:!1,withSource:!1,limit:10})}),(a||i)&&r.jsx(W,{headline:"SQL",children:r.jsx(L.RemoteFile,{path:t.path,children:({file:d})=>r.jsxs(F.Group,{defaultIndex:i?1:0,children:[r.jsx(Ye,{list:[a&&"Source Code",i&&"Compiled Query"].filter(Boolean),className:"!justify-center"}),r.jsxs(F.Panels,{className:"h-full w-full overflow-hidden bg-neutral-10 mt-4 rounded-lg",children:[r.jsx(F.Panel,{unmount:!1,className:I("flex flex-col w-full h-full relative px-2 overflow-hidden p-2","ring-white ring-opacity-60 ring-offset-2 ring-offset-blue-400 focus:outline-none focus:ring-2"),children:r.jsx(L.Default,{content:d.content,type:d.extension,children:({extensions:u,content:g})=>r.jsx(L,{extensions:u.concat(m),content:g,className:"text-xs"})})}),r.jsx(F.Panel,{unmount:!1,className:I("w-full h-full ring-white ring-opacity-60 ring-offset-2 ring-offset-blue-400 focus:outline-none focus:ring-2 p-2"),children:r.jsx(L.Default,{type:ce.SQL,content:t.sql??"",children:({extensions:u,content:g})=>r.jsx(L,{extensions:u.concat(m),content:g,className:"text-xs"})})})]})]})})})]})};function Qe({headline:e}){return r.jsx("div",{className:"text-lg font-bold whitespace-nowrap w-full",id:e,children:r.jsx("h3",{className:"py-2",children:e})})}function Ke(){return r.jsx(te,{className:"font-bold whitespace-nowrap w-full h-full",children:r.jsx("div",{className:"flex items-center justify-center w-full h-full",children:"Documentation Not Found"})})}function te({children:e,className:t}){return r.jsx("div",{className:I("w-full h-full rounded-xl",t),children:r.jsx("div",{className:"w-full h-full py-4 rounded-xl",children:r.jsx("div",{className:"w-full h-full overflow-auto scrollbar scrollbar--vertical scrollbar--horizontal",children:e})})})}function W({children:e,className:t,headline:n,defaultOpen:l=!1}){return r.jsx("div",{className:"px-4",children:r.jsx(K,{defaultOpen:l,children:({open:s})=>r.jsxs(r.Fragment,{children:[r.jsxs(K.Button,{className:I("flex items-center justify-between rounded-lg text-left w-full bg-neutral-10 px-3 mb-2",t),children:[r.jsx(Qe,{headline:n}),r.jsx("div",{children:s?r.jsx(we,{className:"h-6 w-6 text-neutral-50"}):r.jsx(ye,{className:"h-6 w-6 text-neutral-50"})})]}),r.jsx(K.Panel,{className:"pb-2 overflow-hidden",children:r.jsx("div",{className:"px-2",children:e})})]})})})}function O({className:e,name:t,value:n,isHighlighted:l=!1,isCapitalize:s=!1,children:a}){const i=new Date(n),p=de(n)&&!isNaN(i.getTime()),m=typeof n=="boolean";return r.jsxs("li",{className:I("w-full border-b border-primary-10 py-1 mb-1",e),children:[r.jsxs("div",{className:"flex justify-between text-xs",children:[r.jsx("strong",{className:I("mr-2",s&&"capitalize",l&&"text-brand-500"),children:t}),r.jsx("p",{className:"text-xs rounded text-neutral-500 dark:text-neutral-400",children:m?fe(n)?"True":"False":p?xe(i):n})]}),r.jsx("p",{className:"text-xs ",children:a})]})}ee.NotFound=Ke;ee.Container=te;const rt=ee;export{rt as D,Ye as T,F as r};
