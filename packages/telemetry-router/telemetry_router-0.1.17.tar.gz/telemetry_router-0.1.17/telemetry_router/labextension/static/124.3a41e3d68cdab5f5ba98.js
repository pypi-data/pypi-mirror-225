"use strict";(self.webpackChunktelemetry_router=self.webpackChunktelemetry_router||[]).push([[124,664],{7664:(t,e,n)=>{n.d(e,{Dt:()=>d,J3:()=>l,Jt:()=>s,PW:()=>f,U:()=>u,X_:()=>h,aE:()=>c,i5:()=>a,ji:()=>p,vF:()=>y});var r=n(6383),o=Math.pow(10,6),i=Math.pow(10,9);function a(t){var e=t/1e3;return[Math.trunc(e),Math.round(t%1e3*o)]}function u(){var t=r.t.timeOrigin;if("number"!=typeof t){var e=r.t;t=e.timing&&e.timing.fetchStart}return t}function s(t){return y(a(u()),a("number"==typeof t?t:r.t.now()))}function c(t){if(d(t))return t;if("number"==typeof t)return t<u()?s(t):a(t);if(t instanceof Date)return a(t.getTime());throw TypeError("Invalid input type")}function l(t,e){var n=e[0]-t[0],r=e[1]-t[1];return r<0&&(n-=1,r+=i),[n,r]}function f(t){return t[0]*i+t[1]}function p(t){return 1e6*t[0]+t[1]/1e3}function d(t){return Array.isArray(t)&&2===t.length&&"number"==typeof t[0]&&"number"==typeof t[1]}function h(t){return d(t)||"number"==typeof t||t instanceof Date}function y(t,e){var n=[t[0]+e[0],t[1]+e[1]];return n[1]>=i&&(n[1]-=i,n[0]+=1),n}},6383:(t,e,n)=>{n.d(e,{t:()=>r});var r=performance},4124:(t,e,n)=>{n.r(e),n.d(e,{OTLPTraceExporter:()=>x});var r=n(315),o=n(3580),i=n(928);function a(t,e){return i.K.warn("Timeout must be greater than 0",t),e}var u,s=n(5174),c=n(3420),l=function(){function t(t){var e,n,r;void 0===t&&(t={}),this._sendingPromises=[],this.url=this.getDefaultUrl(t),"string"==typeof t.hostname&&(this.hostname=t.hostname),this.shutdown=this.shutdown.bind(this),this._shutdownOnce=new s.q(this._shutdown,this),this._concurrencyLimit="number"==typeof t.concurrencyLimit?t.concurrencyLimit:1/0,this.timeoutMillis="number"==typeof(e=t.timeoutMillis)?e<=0?a(e,1e4):e:(r=Number(null!==(n=(0,o.d)().OTEL_EXPORTER_OTLP_TRACES_TIMEOUT)&&void 0!==n?n:(0,o.d)().OTEL_EXPORTER_OTLP_TIMEOUT))<=0?a(r,1e4):r,this.onInit(t)}return t.prototype.export=function(t,e){this._shutdownOnce.isCalled?e({code:c.I.FAILED,error:new Error("Exporter has been shutdown")}):this._sendingPromises.length>=this._concurrencyLimit?e({code:c.I.FAILED,error:new Error("Concurrent export limit reached")}):this._export(t).then((function(){e({code:c.I.SUCCESS})})).catch((function(t){e({code:c.I.FAILED,error:t})}))},t.prototype._export=function(t){var e=this;return new Promise((function(n,r){try{i.K.debug("items to be sent",t),e.send(t,n,r)}catch(t){r(t)}}))},t.prototype.shutdown=function(){return this._shutdownOnce.call()},t.prototype.forceFlush=function(){return Promise.all(this._sendingPromises).then((function(){}))},t.prototype._shutdown=function(){return i.K.debug("shutdown started"),this.onShutdown(),this.forceFlush()},t}(),f=(u=function(t,e){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},u(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}u(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),p=function(t){function e(e,n,r){var o=t.call(this,e)||this;return o.name="OTLPExporterError",o.data=r,o.code=n,o}return f(e,t),e}(Error),d=function(){return d=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},d.apply(this,arguments)};function h(t,e,n,r,o,a){var u,s,c=!1,l=setTimeout((function(){if(clearTimeout(u),c=!0,s.readyState===XMLHttpRequest.DONE){var t=new p("Request Timeout");a(t)}else s.abort()}),r),f=function(r,h){void 0===r&&(r=5),void 0===h&&(h=1e3),(s=new XMLHttpRequest).open("POST",e),Object.entries(d(d({},{Accept:"application/json","Content-Type":"application/json"}),n)).forEach((function(t){var e=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}(t,2),n=e[0],r=e[1];s.setRequestHeader(n,r)})),s.send(t),s.onreadystatechange=function(){if(s.readyState===XMLHttpRequest.DONE&&!1===c)if(s.status>=200&&s.status<=299)i.K.debug("xhr success",t),o(),clearTimeout(l),clearTimeout(u);else if(s.status&&(d=s.status,[429,502,503,504].includes(d))&&r>0){var e;h*=1.5,e=s.getResponseHeader("Retry-After")?function(t){if(null==t)return-1;var e=Number.parseInt(t,10);if(Number.isInteger(e))return e>0?1e3*e:-1;var n=new Date(t).getTime()-Date.now();return n>=0?n:0}(s.getResponseHeader("Retry-After")):Math.round(Math.random()*(5e3-h)+h),u=setTimeout((function(){f(r-1,h)}),e)}else{var n=new p("Failed to export with XHR (status: "+s.status+")",s.status);a(n),clearTimeout(l),clearTimeout(u)}var d},s.onabort=function(){if(c){var t=new p("Request Timeout");a(t)}clearTimeout(l),clearTimeout(u)},s.onerror=function(){if(c){var t=new p("Request Timeout");a(t)}clearTimeout(l),clearTimeout(u)}};f()}var y=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),v=function(t){function e(e){void 0===e&&(e={});var n=t.call(this,e)||this;return n._useXHR=!1,n._useXHR=!!e.headers||"function"!=typeof navigator.sendBeacon,n._useXHR?n._headers=Object.assign({},function(t){void 0===t&&(t={});var e={};return Object.entries(t).forEach((function(t){var n=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}(t,2),r=n[0],o=n[1];void 0!==o?e[r]=String(o):i.K.warn('Header "'+r+'" has wrong value and will be ignored')})),e}(e.headers),r._T((0,o.d)().OTEL_EXPORTER_OTLP_HEADERS)):n._headers={},n}return y(e,t),e.prototype.onInit=function(){window.addEventListener("unload",this.shutdown)},e.prototype.onShutdown=function(){window.removeEventListener("unload",this.shutdown)},e.prototype.send=function(t,e,n){var r=this;if(this._shutdownOnce.isCalled)i.K.debug("Shutdown already started. Cannot send objects");else{var o=this.convert(t),a=JSON.stringify(o),u=new Promise((function(t,e){r._useXHR?h(a,r.url,r._headers,r.timeoutMillis,t,e):function(t,e,n,r,o){navigator.sendBeacon(e,new Blob([t],{type:"application/json"}))?(i.K.debug("sendBeacon - can send",t),r()):o(new p("sendBeacon - cannot send "+t))}(a,r.url,0,t,e)})).then(e,n);this._sendingPromises.push(u);var s=function(){var t=r._sendingPromises.indexOf(u);r._sendingPromises.splice(t,1)};u.then(s,s)}},e}(l),m=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};function b(t){return Object.keys(t).map((function(e){return _(e,t[e])}))}function _(t,e){return{key:t,value:w(e)}}function w(t){var e=typeof t;return"string"===e?{stringValue:t}:"number"===e?Number.isInteger(t)?{intValue:t}:{doubleValue:t}:"boolean"===e?{boolValue:t}:t instanceof Uint8Array?{bytesValue:t}:Array.isArray(t)?{arrayValue:{values:t.map(w)}}:"object"===e&&null!=t?{kvlistValue:{values:Object.entries(t).map((function(t){var e=m(t,2);return _(e[0],e[1])}))}}:{}}var T=n(7664);function O(t){for(var e=t.length,n="",r=0;r<e;r+=2){var o=t.substring(r,r+2),i=parseInt(o,16);n+=String.fromCharCode(i)}return btoa(n)}function E(t,e){var n,r=t.spanContext(),o=t.status,i=e?t.parentSpanId:null!=t.parentSpanId?O(t.parentSpanId):void 0;return{traceId:e?r.traceId:O(r.traceId),spanId:e?r.spanId:O(r.spanId),parentSpanId:i,traceState:null===(n=r.traceState)||void 0===n?void 0:n.serialize(),name:t.name,kind:null==t.kind?0:t.kind+1,startTimeUnixNano:(0,T.PW)(t.startTime),endTimeUnixNano:(0,T.PW)(t.endTime),attributes:b(t.attributes),droppedAttributesCount:t.droppedAttributesCount,events:t.events.map(g),droppedEventsCount:t.droppedEventsCount,status:{code:o.code,message:o.message},links:t.links.map((function(t){return function(t,e){var n;return{attributes:t.attributes?b(t.attributes):[],spanId:e?t.context.spanId:O(t.context.spanId),traceId:e?t.context.traceId:O(t.context.traceId),traceState:null===(n=t.context.traceState)||void 0===n?void 0:n.serialize(),droppedAttributesCount:t.droppedAttributesCount||0}}(t,e)})),droppedLinksCount:t.droppedLinksCount}}function g(t){return{attributes:t.attributes?b(t.attributes):[],name:t.name,timeUnixNano:(0,T.PW)(t.time),droppedAttributesCount:t.droppedAttributesCount||0}}var S=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};function P(t,e){for(var n=function(t){var e,n,r=new Map;try{for(var o=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),i=o.next();!i.done;i=o.next()){var a=i.value,u=r.get(a.resource);u||(u=new Map,r.set(a.resource,u));var s=a.instrumentationLibrary.name+"@"+(a.instrumentationLibrary.version||"")+":"+(a.instrumentationLibrary.schemaUrl||""),c=u.get(s);c||(c=[],u.set(s,c)),c.push(a)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r}(t),r=[],o=n.entries(),i=o.next();!i.done;){for(var a=S(i.value,2),u=a[0],s=[],c=a[1].values(),l=c.next();!l.done;){var f=l.value;if(f.length>0){var p=f[0].instrumentationLibrary,d=p.name,h=p.version,y=p.schemaUrl,v=f.map((function(t){return E(t,e)}));s.push({scope:{name:d,version:h},spans:v,schemaUrl:y})}l=c.next()}var m={resource:{attributes:b(u.attributes),droppedAttributesCount:0},scopeSpans:s,schemaUrl:void 0};r.push(m),i=o.next()}return r}var R=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),L="v1/traces",I="http://localhost:4318/"+L,x=function(t){function e(e){void 0===e&&(e={});var n=t.call(this,e)||this;return n._headers=Object.assign(n._headers,r._T((0,o.d)().OTEL_EXPORTER_OTLP_TRACES_HEADERS)),n}return R(e,t),e.prototype.convert=function(t){return function(t,e){return{resourceSpans:P(t,!0)}}(t)},e.prototype.getDefaultUrl=function(t){return"string"==typeof t.url?t.url:(0,o.d)().OTEL_EXPORTER_OTLP_TRACES_ENDPOINT.length>0?function(t){try{var e=new URL(t);return""===e.pathname&&(e.pathname=e.pathname+"/"),e.toString()}catch(e){return i.K.warn("Could not parse export URL: '"+t+"'"),t}}((0,o.d)().OTEL_EXPORTER_OTLP_TRACES_ENDPOINT):(0,o.d)().OTEL_EXPORTER_OTLP_ENDPOINT.length>0?(e=(0,o.d)().OTEL_EXPORTER_OTLP_ENDPOINT,n=L,e.endsWith("/")||(e+="/"),e+n):I;var e,n},e}(v)}}]);